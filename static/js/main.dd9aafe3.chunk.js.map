{"version":3,"sources":["subwayUtils/subwayRef.js","subwayUtils/customSubwayHooks.js","aggregates/navigation/verbs/events.js","aggregates/navigation/verbs/commands.js","aggregates/navigation/handlers/commands.js","aggregates/navigation/handlers/events.js","aggregates/navigation/commandCreators.js","aggregates/navigation/ui/containers/navbar.js","aggregates/navigation/ui/containers/breadcrumbs.js","aggregates/navigation/index.js","aggregates/products/verbs/commands.js","aggregates/products/commandCreators.js","aggregates/products/verbs/events.js","aggregates/products/api/data.js","aggregates/products/handlers/commands.js","aggregates/products/api/mockApi.js","aggregates/products/handlers/events.js","aggregates/products/ui/components/addToCartButton.js","aggregates/products/ui/containers/productList.js","aggregates/products/ui/containers/productDetails.js","aggregates/products/ui/components/disclaimer.js","aggregates/products/index.js","aggregates/shoppingCart/verbs/events.js","aggregates/shoppingCart/verbs/commands.js","aggregates/shoppingCart/handlers/commands.js","aggregates/shoppingCart/handlers/events.js","aggregates/shoppingCart/ui/containers/headerShoppingCartDropdown.js","aggregates/shoppingCart/commandCreators.js","aggregates/shoppingCart/ui/containers/checkout.js","aggregates/shoppingCart/index.js","aggregates/session/verbs/events.js","aggregates/session/verbs/commands.js","aggregates/session/handlers/commands.js","aggregates/session/api/mockApi.js","aggregates/session/handlers/events.js","aggregates/session/commandCreators.js","aggregates/session/ui/containers/loginModal.js","aggregates/session/index.js","App.js","subwayUtils/utils.js","serviceWorker.js","index.js"],"names":["Subway","window","useObserveAggregateState","aggregateName","selector","once","useState","data","setData","useEffect","console","log","selectAggregate","observeState","next","nextState","unsubscribe","currentState","e","Events","Commands","cmdHandlers","command","handler","events","id","evtHandlers","aggregateState","proposal","currentPage","selectHomePage","AGGREGATE_NAME","sendCommand","Navbar","shoppingCartMenuItem","isUserLogged","userLogged","username","sessionData","Menu","size","borderless","fixed","Container","Item","Header","color","position","Button","onClick","style","marginLeft","basic","Popup","on","trigger","icon","Icon","name","Content","padding","List","Divider","selection","verticalAlign","Breadcrumbs","eventID","spy","eventPayload","useSpyAggregateEvent","product","title","selectedProduct","NAVIGATION_AGGREGATE_NAME","Grid","relaxed","columns","Column","Breadcrumb","Section","active","link","textAlign","content","labelPosition","aggregateConfig","initialState","bootstrap","triggerAfter","targetAggregate","triggeredEvent","triggerAddToShoppingCart","img","price","ccy","rating","reviewsCount","newPrice","payload","a","async","Promise","resolve","reject","setTimeout","productsList","AddToCartButton","loading","setLoading","fluid","ProductList","detailsButtonHoveredId","setDetailsButtonHoveredId","PRODUCTS_AGGREGATE_NAME","productList","map","key","Card","Image","label","as","corner","Dimmer","Dimmable","onMouseOver","onMouseLeave","dimmed","src","wrapped","selectProductForDetails","Meta","Rating","disabled","defaultRating","maxRating","Description","Label","tag","extra","ProductDetails","Segment","Group","horizontal","compact","i","messages","Disclaimer","visible","setVisible","Transition","animation","duration","Message","onDismiss","zIndex","bottom","right","width","header","list","GO_TO_CHECKOUT","items","has","prod","get","set","count","HeaderShoppingCartDropdown","SHOPPING_CART_AGGREGATE_NAME","Map","cartItems","Array","from","item","itemsTotal","reduce","acc","curr","length","Subheader","divided","circular","className","toFixed","Checkout","password","status","jwt","authenticationResult","concat","show","loginModalVisible","hideLoginScreen","LoginModal","authInProgress","setAuthInProgress","isLoginModalVisible","Modal","open","dimmer","onClose","Form","Field","Input","value","type","Actions","App","aggregates","background","Boolean","location","hostname","match","sessionAggregateConfig","productAggregateConfig","navigationAggregateConfig","shoppingCartAggregateConfig","forEach","aggregate","onError","setCommandHandler","setEventHandler","initHandlers","createAggregate","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dd9aafe3.chunk.js","sourcesContent":["export const Subway = window.Subway;\n","import { useState, useEffect } from \"react\";\nimport { Subway } from \"./subwayRef\";\n\nexport const useObserveAggregateState = (\n  aggregateName,\n  selector,\n  once = false\n) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    console.log(\">>>> useObserveAggregateState init\");\n    const productsAggregate = Subway.selectAggregate(aggregateName);\n    const { currentState, unsubscribe } = productsAggregate.observeState({\n      next: ({ nextState }) => {\n        setData(selector(nextState));\n        if (once) unsubscribe();\n      }\n    });\n    setData(selector(currentState));\n\n    return () => {\n      try {\n        unsubscribe();\n      } catch (e) {\n      } finally {\n      }\n    };\n  }, []);\n\n  return [data];\n};\n\nexport const useObserveAggregateStateOnce = (aggregateName, selector) =>\n  useObserveAggregateState(aggregateName, selector, true);\n\nexport const useSpyAggregateEvent = (aggregateName, eventID, selector) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = Subway.selectAggregate(aggregateName).spy(eventID, {\n      next: eventPayload => {\n        setData(selector(eventPayload));\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  return [data];\n};\n","export const Events = {\n  PRODUCT_PAGE_SELECTED: \"PRODUCT_PAGE_SELECTED\",\n  HOME_PAGE_SELECTED: \"HOME_PAGE_SELECTED\",\n  LOGIN_MODAL_REQUEST_SUBMITTED: \"LOGIN_MODAL_REQUEST_SUBMITTED\",\n  LOGOUT_USER_REQUEST_SUBMITTED: \"LOGOUT_USER_REQUEST_SUBMITTED\",\n  CHECKOUT_PAGE_REQUEST_SUBMITTED: \"CHECKOUT_PAGE_REQUEST_SUBMITTED\"\n};\n","export const Commands = {\n  SELECT_HOME_PAGE: \"SELECT_HOME_PAGE\",\n  REQUEST_USER_LOGOUT: \"REQUEST_USER_LOGOUT\",\n  REQUEST_LOGIN_MODAL: \"REQUEST_LOGIN_MODAL\"\n};\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\n\nexport const cmdSelectHomePageHandler = {\n  command: Commands.SELECT_HOME_PAGE,\n  handler: () => ({\n    events: [{ id: Events.HOME_PAGE_SELECTED }]\n  })\n};\n\nexport const cmdRequestLoginModalHandler = {\n  command: Commands.REQUEST_LOGIN_MODAL,\n  handler: () => ({\n    events: [{ id: Events.LOGIN_MODAL_REQUEST_SUBMITTED }]\n  })\n};\n\nexport const cmdLogoutUserHandler = {\n  command: Commands.REQUEST_USER_LOGOUT,\n  handler: () => ({\n    events: [{ id: Events.LOGOUT_USER_REQUEST_SUBMITTED }]\n  })\n};\n\nexport const cmdHandlers = [\n  cmdSelectHomePageHandler,\n  cmdRequestLoginModalHandler,\n  cmdLogoutUserHandler\n];\n","import { Events } from \"../verbs/events\";\n\nexport const evtHomePageSelectedHandler = {\n  command: Events.HOME_PAGE_SELECTED,\n  handler: aggregateState => ({\n    proposal: {\n      ...aggregateState,\n      currentPage: \"home\"\n    }\n  })\n};\n\nexport const evtProductPageSelectedHandler = {\n  command: Events.PRODUCT_PAGE_SELECTED,\n  handler: aggregateState => ({\n    proposal: {\n      ...aggregateState,\n      currentPage: \"product\"\n    }\n  })\n};\n\nexport const evtCheckoutPageRequestSubmittedHandler = {\n  command: Events.CHECKOUT_PAGE_REQUEST_SUBMITTED,\n  handler: aggregateState => ({\n    proposal: {\n      ...aggregateState,\n      currentPage: \"checkout\"\n    }\n  })\n};\n\nexport const evtHandlers = [\n  evtHomePageSelectedHandler,\n  evtProductPageSelectedHandler,\n  evtCheckoutPageRequestSubmittedHandler\n];\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\nexport const selectHomePage = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(Commands.SELECT_HOME_PAGE);\n};\n\nexport const showLoginScreen = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.REQUEST_LOGIN_MODAL\n  );\n};\n\nexport const logout = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.REQUEST_USER_LOGOUT\n  );\n};\n","import React from \"react\";\nimport {\n  Container,\n  Menu,\n  Header,\n  Dropdown,\n  Button,\n  Popup,\n  List,\n  Icon,\n  Divider\n} from \"semantic-ui-react\";\nimport { useObserveAggregateState } from \"../../../../subwayUtils\";\nimport { showLoginScreen, logout } from \"../../commandCreators\";\n\nexport function Navbar({ shoppingCartMenuItem }) {\n  const [sessionData] = useObserveAggregateState(\n    \"SessionAggregate\",\n    aggregateState => ({\n      isUserLogged: aggregateState.userLogged,\n      username: aggregateState.username\n    })\n  );\n\n  return (\n    <Menu size=\"small\" borderless fixed=\"top\">\n      <Container>\n        <Menu.Item>\n          <Header color=\"teal\">SubwayJS eComm</Header>\n        </Menu.Item>\n\n        <Menu.Item position=\"right\">\n          {shoppingCartMenuItem}\n          {sessionData && !sessionData.isUserLogged && (\n            <Button\n              onClick={() => showLoginScreen()}\n              style={{ marginLeft: 10 }}\n              color=\"teal\"\n              basic\n            >\n              {\" \"}\n              Log-in\n            </Button>\n          )}\n          {sessionData && sessionData.isUserLogged && (\n            <Popup\n              on=\"click\"\n              position=\"bottom right\"\n              trigger={\n                <Button basic color=\"teal\" icon style={{ marginLeft: 10 }}>\n                  <Icon name=\"user\" />\n                </Button>\n              }\n            >\n              <Popup.Content style={{ padding: \"0 !important\" }}>\n                <List.Header>{`Hi, ${sessionData.username}`} </List.Header>\n                <Divider />\n                <List selection verticalAlign=\"middle\">\n                  <List.Item onClick={() => logout()}>Logout</List.Item>\n                </List>\n              </Popup.Content>\n            </Popup>\n\n            // <Dropdown item icon=\"teal user\">\n            //   <Dropdown.Menu>\n            //     <Dropdown.Header content={`Hi, ${sessionData.username}`} />\n            //     <Dropdown.Divider />\n            //     <Dropdown.Item icon=\"edit\" text=\"Account details\" />\n            //     <Dropdown.Item icon=\"edit\" text=\"History\" />\n            //     <Dropdown.Item icon=\"edit\" text=\"Logout\" />\n            //   </Dropdown.Menu>\n            // </Dropdown>\n          )}\n        </Menu.Item>\n      </Container>\n    </Menu>\n  );\n}\n","import React from \"react\";\nimport { Breadcrumb, Button, Grid } from \"semantic-ui-react\";\n\nimport {\n  useSpyAggregateEvent,\n  useObserveAggregateState\n} from \"../../../../subwayUtils/\";\nimport { selectHomePage } from \"../../commandCreators\";\n\nimport { AGGREGATE_NAME as NAVIGATION_AGGREGATE_NAME } from \"../../\";\n\nexport function Breadcrumbs() {\n  const [selectedProduct] = useSpyAggregateEvent(\n    \"ProductsAggregate\",\n    \"ProductSelectedForDetails\",\n    ({ product }) => ({ id: product.id, title: product.title })\n  );\n\n  const [currentPage] = useObserveAggregateState(\n    NAVIGATION_AGGREGATE_NAME,\n    aggregateState => aggregateState.currentPage\n  );\n\n  return (\n    <Grid relaxed columns={2}>\n      <Grid.Column>\n        <Breadcrumb>\n          {currentPage === \"home\" && (\n            <Breadcrumb.Section active>Products</Breadcrumb.Section>\n          )}\n          {currentPage === \"product\" &&\n            selectedProduct &&\n            selectedProduct.id &&\n            selectedProduct.title && (\n              <>\n                <Breadcrumb.Section\n                  active\n                  link\n                  onClick={() => selectHomePage()}\n                >\n                  Products\n                </Breadcrumb.Section>\n                <Breadcrumb.Divider />\n                <Breadcrumb.Section active>\n                  {selectedProduct.title}\n                </Breadcrumb.Section>\n              </>\n            )}\n        </Breadcrumb>\n      </Grid.Column>\n      {currentPage === \"product\" && (\n        <Grid.Column textAlign=\"right\">\n          <Button\n            onClick={() => selectHomePage()}\n            size=\"tiny\"\n            content=\"Back to products\"\n            icon=\"angle left\"\n            color=\"teal\"\n            labelPosition=\"left\"\n          />\n        </Grid.Column>\n      )}\n    </Grid>\n  );\n}\n","import { Subway } from \"../../subwayUtils/\";\n\nimport { Events } from \"./verbs/events\";\n\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport { Navbar } from \"./ui/containers/navbar\";\nexport { Breadcrumbs } from \"./ui/containers/breadcrumbs\";\n\nexport const AGGREGATE_NAME = \"NavigationAggregate\";\n\nconst initialState = {\n  currentPage: \"home\"\n};\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState,\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => {\n    Subway.selectAggregate(\"ProductsAggregate\").triggerAfter(\n      \"ProductSelectedForDetails\",\n      {\n        targetAggregate: AGGREGATE_NAME,\n        triggeredEvent: Events.PRODUCT_PAGE_SELECTED\n      }\n    );\n\n    Subway.selectAggregate(\"*\").triggerAfter(\"CHECKOUT_PAGE_REQUESTED\", {\n      targetAggregate: AGGREGATE_NAME,\n      triggeredEvent: Events.CHECKOUT_PAGE_REQUEST_SUBMITTED\n    });\n  }\n};\n","export const Commands = {\n  LOAD_PRODUCTS_LIST: \"LoadProductsList\",\n  SELECT_PRODUCT_FOR_DETAILS: \"SelectProductForDetails\",\n  TRIGGER_ADD_TO_SHOPPING_CART: \"TriggerAddToShoppingCart\"\n};\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\nexport const loadProductsList = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.LOAD_PRODUCTS_LIST\n  );\n};\n\nexport const selectProductForDetails = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.SELECT_PRODUCT_FOR_DETAILS,\n    { product }\n  );\n};\n\nexport const triggerAddToShoppingCart = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.TRIGGER_ADD_TO_SHOPPING_CART,\n    { product }\n  );\n};\n","export const Events = {\n  PRODUCTS_LIST_LOADED: \"ProductsListLoaded\",\n  PRODUCT_SELECTED_FOR_DETAILS: \"ProductSelectedForDetails\",\n  ADD_TO_SHOPPING_CART_TRIGGERED: \"ADD_TO_SHOPPING_CART_TRIGGERED\"\n};\n","export const data = [\n  {\n    id: 1,\n    img: \"images/products/11.jpg\",\n    title: \"GoPro HERO7 Camera\",\n    price: \"299.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 132\n  },\n  {\n    id: 2,\n    img: \"images/products/5.jpg\",\n    title: \"Leather Sleeve - Macbook 13’’\",\n    price: \"3753.00\",\n    newPrice: \"3099.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 56\n  },\n  {\n    id: 3,\n    img: \"images/products/4.jpg\",\n    title: \"Fjällräven Kånken Backpack Blue Ridge\",\n    price: \"84.00\",\n    ccy: \"$\",\n    rating: \"5\",\n    reviewsCount: 85\n  },\n  {\n    id: 4,\n    img: \"images/products/12.jpg\",\n    title: \"Off-White Odsy-1000 Low-Top Sneakers\",\n    price: \"815.00\",\n    newPrice: \"799.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 422\n  },\n  {\n    id: 5,\n    img: \"images/products/9.jpg\",\n    title: \"Logitech - Headset for gaming\",\n    price: \"19.00\",\n    newPrice: \"14.99\",\n    ccy: \"$\",\n    rating: \"3\",\n    reviewsCount: 23\n  },\n  {\n    id: 6,\n    img: \"images/products/10.jpg\",\n    title: \"Apple Homkit - Ecobee3 Lite Smart Thermostat\",\n    price: \"169.95\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 198\n  }\n];\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\n\nimport * as MockAPI from \"../api/mockApi\";\n\nexport const cmdLoadProductsListHandler = {\n  command: Commands.LOAD_PRODUCTS_LIST,\n  handler: async (aggregateState, payload) => {\n    const productsList = await MockAPI.getProductsList();\n    return {\n      events: [{ id: Events.PRODUCTS_LIST_LOADED, payload: { productsList } }]\n    };\n  }\n};\n\nexport const cmdSelectProductForDetailsHandler = {\n  command: Commands.SELECT_PRODUCT_FOR_DETAILS,\n  handler: (aggregateState, { product }) => ({\n    // TODO load product details???\n    events: [{ id: Events.PRODUCT_SELECTED_FOR_DETAILS, payload: { product } }]\n  })\n};\nexport const cmdTriggerAddToShoppingCartHandler = {\n  command: Commands.TRIGGER_ADD_TO_SHOPPING_CART,\n  handler: (aggregateState, { product }) => ({\n    // TODO allow external aggregate?\n    events: [\n      { id: Events.ADD_TO_SHOPPING_CART_TRIGGERED, payload: { product } }\n    ]\n  })\n};\n\nexport const cmdHandlers = [\n  cmdLoadProductsListHandler,\n  cmdSelectProductForDetailsHandler,\n  cmdTriggerAddToShoppingCartHandler\n];\n","import { data } from \"./data\";\n\nconst RPC_FAKE_DELAY = 500;\nexport const getProductsList = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(data);\n    }, RPC_FAKE_DELAY);\n  });\n};\n","import { Events } from \"../verbs/events\";\n\nexport const evtProductsListLoadedHandler = {\n  command: Events.PRODUCTS_LIST_LOADED,\n  handler: (aggregateState, { productsList }) => {\n    return {\n      proposal: {\n        ...aggregateState,\n        productsList\n      }\n    };\n  }\n};\n\n// TODO review communication messaging logic\nexport const evtProductSelectedForDetailsHandler = {\n  command: Events.PRODUCT_SELECTED_FOR_DETAILS,\n  handler: (aggregateState, { product }) => {\n    return {\n      proposal: {\n        ...aggregateState,\n        selectedProduct: product\n      }\n    };\n  }\n};\n\nexport const evtHandlers = [\n  evtProductsListLoadedHandler,\n  evtProductSelectedForDetailsHandler\n];\n","import React, { useState } from \"react\";\nimport { Button, Icon } from \"semantic-ui-react\";\n\nexport function AddToCartButton({ product, size, onClick }) {\n  const [loading, setLoading] = useState(false);\n  return (\n    <Button\n      size={size}\n      fluid\n      loading={loading}\n      color=\"teal\"\n      onClick={() => {\n        setLoading(true);\n        setTimeout(() => {\n          onClick(product);\n          setLoading(false);\n        }, 500);\n      }}\n    >\n      <Button.Content>\n        <Icon name=\"shop\" /> Add to cart\n      </Button.Content>\n    </Button>\n  );\n}\n","import React, { useState } from \"react\";\nimport {\n  Grid,\n  Image,\n  Label,\n  Icon,\n  Card,\n  Rating,\n  Button,\n  Dimmer\n} from \"semantic-ui-react\";\n\nimport { useObserveAggregateStateOnce } from \"../../../../subwayUtils/\";\n\nimport { AGGREGATE_NAME as PRODUCTS_AGGREGATE_NAME } from \"../../\";\n\nimport {\n  selectProductForDetails,\n  triggerAddToShoppingCart\n} from \"../../commandCreators\";\n\nimport { AddToCartButton } from \"../components/addToCartButton\";\n\nexport function ProductList() {\n  const [detailsButtonHoveredId, setDetailsButtonHoveredId] = useState(null);\n\n  const [productList] = useObserveAggregateStateOnce(\n    PRODUCTS_AGGREGATE_NAME,\n    aggregateState => aggregateState.productsList\n  );\n\n  return (\n    <Grid columns={3}>\n      {productList &&\n        productList.map(product => {\n          const {\n            id,\n            img,\n            title,\n            price,\n            rating,\n            reviewsCount,\n            newPrice = null,\n            ccy\n          } = product;\n          return (\n            <Grid.Column key={id}>\n              <Card>\n                {newPrice && (\n                  <Image\n                    fluid\n                    label={{\n                      as: \"a\",\n                      color: \"orange\",\n                      corner: \"left\",\n                      icon: \"star\"\n                    }}\n                  />\n                )}\n                <Dimmer.Dimmable\n                  as={Image}\n                  onMouseOver={() => {\n                    setDetailsButtonHoveredId(id);\n                  }}\n                  onMouseLeave={() => {\n                    setDetailsButtonHoveredId(null);\n                  }}\n                  dimmed={detailsButtonHoveredId === id}\n                >\n                  <Image src={img} wrapped />\n\n                  <Dimmer active={detailsButtonHoveredId === id}>\n                    <Button\n                      basic\n                      size=\"small\"\n                      color=\"teal\"\n                      onClick={() => selectProductForDetails(product)}\n                    >\n                      <Button.Content>\n                        <Icon name=\"magnify\" /> Product details\n                      </Button.Content>\n                    </Button>\n                  </Dimmer>\n                </Dimmer.Dimmable>\n                <Card.Content>\n                  <Card.Header as=\"a\">{title}</Card.Header>\n                  <Card.Meta>\n                    <Rating\n                      size=\"mini\"\n                      disabled\n                      icon=\"star\"\n                      defaultRating={rating}\n                      maxRating={5}\n                    />{\" \"}\n                    {reviewsCount} Reviews\n                  </Card.Meta>\n                  {newPrice && (\n                    <>\n                      <Card.Description>\n                        <strike>\n                          {ccy}\n                          {price}\n                        </strike>{\" \"}\n                        <Icon name=\"arrow right\" />{\" \"}\n                        <Label as=\"span\" color=\"orange\" tag>\n                          {ccy}\n                          {newPrice}\n                        </Label>\n                      </Card.Description>\n                    </>\n                  )}\n                  {!newPrice && (\n                    <Card.Description>\n                      {ccy}\n                      {price}{\" \"}\n                    </Card.Description>\n                  )}\n                </Card.Content>\n                <Card.Content extra>\n                  <AddToCartButton\n                    size=\"small\"\n                    product={product}\n                    onClick={triggerAddToShoppingCart}\n                  />\n                  {\n                    // <Button size=\"small\" fluid color=\"teal\">\n                    //   <Button.Content>\n                    //     <Icon name=\"shop\" /> Add to cart\n                    //   </Button.Content>\n                    // </Button>\n                  }\n                </Card.Content>\n              </Card>\n            </Grid.Column>\n          );\n        })}\n    </Grid>\n  );\n}\n","import React from \"react\";\nimport {\n  Segment,\n  Image,\n  Header,\n  Container,\n  Rating,\n  Divider,\n  Icon,\n  Label\n} from \"semantic-ui-react\";\n\nimport { AGGREGATE_NAME as PRODUCTS_AGGREGATE_NAME } from \"../../\";\n\nimport { useObserveAggregateState } from \"../../../../subwayUtils/\";\nimport { AddToCartButton } from \"../components/addToCartButton\";\nimport { triggerAddToShoppingCart } from \"../../commandCreators\";\n\nexport function ProductDetails() {\n  const [product] = useObserveAggregateState(\n    PRODUCTS_AGGREGATE_NAME,\n    aggregateState => aggregateState.selectedProduct\n  );\n\n  return (\n    <>\n      {\" \"}\n      {product && (\n        <Segment.Group horizontal>\n          <Segment>\n            <Image src={product.img} wrapped />\n\n            <Segment.Group horizontal compact>\n              {[1, 2, 3].map(i => (\n                <Segment key={i} basic>\n                  <Image src={product.img} size=\"tiny\" />\n                </Segment>\n              ))}\n            </Segment.Group>\n          </Segment>\n          <Segment>\n            <Header size=\"huge\">\n              {product.title}{\" \"}\n              {product.newPrice && (\n                <Label as=\"span\" color=\"orange\" tag>\n                  ON SALE\n                </Label>\n              )}\n            </Header>\n            <Container>\n              <Rating\n                disabled\n                icon=\"star\"\n                defaultRating={product.rating}\n                maxRating={5}\n              />{\" \"}\n              {product.reviewsCount} Reviews\n            </Container>\n            <br />\n            <Container>\n              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n              enim ad minim veniam, quis nostrud exercitation ullamco laboris\n              nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in\n              reprehenderit in voluptate velit esse cillum dolore eu fugiat\n              nulla pariatur. Excepteur sint occaecat cupidatat non proident,\n              sunt in culpa qui officia deserunt mollit anim id est laborum.\n            </Container>\n\n            <br />\n\n            {product.newPrice && (\n              <>\n                <Label as=\"span\" color=\"grey\" basic size=\"huge\">\n                  <strike>\n                    {product.ccy}\n                    {product.price}\n                  </strike>\n                </Label>\n                <Icon name=\"arrow right\" size=\"big\" />\n                <Label as=\"span\" color=\"orange\" size=\"huge\">\n                  {product.ccy}\n                  {product.newPrice}\n                </Label>\n              </>\n            )}\n            {!product.newPrice && (\n              <Header size=\"huge\">\n                {product.ccy}\n                {product.price}\n              </Header>\n            )}\n\n            <Divider />\n            <AddToCartButton\n              size=\"huge\"\n              product={product}\n              onClick={triggerAddToShoppingCart}\n            />\n            {\n              // <Button size=\"huge\" fluid color=\"teal\">\n              //   <Button.Content>\n              //     <Icon name=\"shop\" /> Add to cart\n              //   </Button.Content>\n              // </Button>\n            }\n          </Segment>\n        </Segment.Group>\n      )}\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Message, Transition } from \"semantic-ui-react\";\n\nconst messages = [\n  \"This is not a real ecommerce\",\n  \"Prices and ratings are not real\",\n  \"All product and company names are trademarks™ or registered® trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.\"\n];\n\nexport function Disclaimer() {\n  const [visible, setVisible] = useState(false);\n  useEffect(() => {\n    setTimeout(() => {\n      setVisible(true);\n    }, 4000);\n  }, []);\n\n  const handleDismiss = () => {\n    setVisible(false);\n  };\n\n  return (\n    <Transition visible={visible} animation=\"fade up\" duration={500}>\n      <Message\n        color=\"teal\"\n        size=\"tiny\"\n        onDismiss={handleDismiss}\n        style={{\n          position: \"fixed\",\n          zIndex: 10,\n          bottom: 0,\n          right: 0,\n          width: \"100%\"\n        }}\n        header=\"Disclaimer\"\n        list={messages}\n      />\n    </Transition>\n  );\n}\n","import { loadProductsList } from \"./commandCreators\";\n\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport const AGGREGATE_NAME = \"ProductsAggregate\";\nconst initialState = {\n  productsList: [],\n  selectedProduct: null\n};\n\nexport { ProductList } from \"./ui/containers/productList\";\nexport { ProductDetails } from \"./ui/containers/productDetails\";\nexport { Disclaimer } from \"./ui/components/disclaimer\";\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState,\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => loadProductsList()\n};\n","export const Events = {\n  PRODUCT_ADDED_TO_CART: \"PRODUCT_ADDED_TO_CART\",\n  CHECKOUT_PAGE_REQUESTED: \"CHECKOUT_PAGE_REQUESTED\"\n};\n","export const Commands = {\n  GO_TO_CHECKOUT: \"GO_TO_CHECKOUT\"\n};\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\n\nexport const cmdGoToCheckoutHandler = {\n  command: Commands.GO_TO_CHECKOUT,\n  handler: async (aggregateState, payload) => ({\n    events: [{ id: Events.CHECKOUT_PAGE_REQUESTED }]\n  })\n};\nexport const cmdHandlers = [cmdGoToCheckoutHandler];\n","import { Events } from \"../verbs/events\";\n\nexport const evtProductAddedToCartHandler = {\n  command: Events.PRODUCT_ADDED_TO_CART,\n  handler: (aggregateState, { product }) => {\n    // TODO change to add products count and total\n    // const items = aggregateState.items.concat(product);\n\n    const { items } = aggregateState;\n    if (items.has(product.id)) {\n      const prod = items.get(product.id);\n      items.set(product.id, { ...product, count: prod.count + 1 });\n    } else {\n      items.set(product.id, { ...product, count: 1 });\n    }\n    return {\n      proposal: {\n        ...aggregateState,\n        items\n      }\n    };\n  }\n};\n\nexport const evtHandlers = [evtProductAddedToCartHandler];\n","import React from \"react\";\nimport {\n  Button,\n  Popup,\n  Header,\n  Icon,\n  Segment,\n  Item,\n  Label,\n  Dropdown\n} from \"semantic-ui-react\";\nimport { AGGREGATE_NAME as SHOPPING_CART_AGGREGATE_NAME } from \"../../\";\nimport { useObserveAggregateState } from \"../../../../subwayUtils/\";\nimport { goToCheckout } from \"../../commandCreators\";\n\nexport function HeaderShoppingCartDropdown({ size }) {\n  const [shoppingData] = useObserveAggregateState(\n    SHOPPING_CART_AGGREGATE_NAME,\n    aggregateState => aggregateState || {}\n  );\n  const { items = new Map() } = shoppingData || {};\n  const cartItems = Array.from(items).map(item => ({ ...item[1] }));\n  const itemsTotal = cartItems.reduce((acc, curr) => +acc + +curr.count, 0);\n  return (\n    <Popup\n      on=\"click\"\n      position=\"bottom right\"\n      trigger={\n        <Button color=\"teal\" icon>\n          <Icon name=\"shopping cart\" />\n          {itemsTotal > 0 && `    (${itemsTotal})`}\n        </Button>\n      }\n    >\n      <Popup.Content>\n        {(!cartItems || cartItems.length === 0) && (\n          <Segment basic textAlign=\"center\">\n            <Icon name=\"frown outline\" size=\"big\" color=\"teal\" />\n            <Header size=\"tiny\">\n              <Header.Subheader>Your shopping cart is empty</Header.Subheader>\n            </Header>\n          </Segment>\n        )}\n        {cartItems && cartItems.length > 0 && (\n          <Item.Group divided>\n            {cartItems.map(\n              ({ id, img, title, price, newPrice, ccy, count }) => (\n                <Item key={id}>\n                  <Item.Image size=\"mini\" src={img} />\n\n                  <Item.Content>\n                    <Item.Description>\n                      {count && count > 1 && (\n                        <Label circular size=\"tiny\" color=\"black\">\n                          x{count}\n                        </Label>\n                      )}{\" \"}\n                      {title}\n                    </Item.Description>\n                    <Item.Meta>\n                      <span className=\"price\">\n                        {ccy}\n                        {(newPrice || price) * count}\n                      </span>\n                    </Item.Meta>\n                  </Item.Content>\n                </Item>\n              )\n            )}\n            <Item>\n              <Item.Header as=\"h4\">\n                Total: {cartItems[0].ccy}{\" \"}\n                {cartItems\n                  .reduce(\n                    (acc, curr) =>\n                      +acc + +((curr.newPrice || curr.price) * curr.count),\n                    0\n                  )\n                  .toFixed(2)}\n              </Item.Header>\n            </Item>\n\n            <Item>\n              <Item.Content>\n                <Button fluid color=\"teal\" onClick={() => goToCheckout()}>\n                  Checkout\n                </Button>\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        )}\n      </Popup.Content>\n    </Popup>\n  );\n}\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\nexport const addProductToCart = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.ADD_PRODUCT_TO_CART,\n    { product }\n  );\n};\n\nexport const goToCheckout = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(Commands.GO_TO_CHECKOUT);\n};\n","import React from \"react\";\nimport { Message } from \"semantic-ui-react\";\n\nexport function Checkout() {\n  return <Message color=\"black\" size=\"tiny\" header=\"TODO\" />;\n}\n","import { Subway } from \"../../subwayUtils/\";\n\n// import { addProductToCart } from \"./commandCreators\";\nimport { Events } from \"./verbs/events\";\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport const AGGREGATE_NAME = \"ShoppingCartAggregate\";\n\nexport {\n  HeaderShoppingCartDropdown\n} from \"./ui/containers/headerShoppingCartDropdown\";\nexport { Checkout } from \"./ui/containers/checkout\";\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState: { items: new Map() },\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => {\n    Subway.selectAggregate(\"ProductsAggregate\").triggerAfter(\n      \"ADD_TO_SHOPPING_CART_TRIGGERED\",\n      {\n        targetAggregate: AGGREGATE_NAME,\n        triggeredEvent: Events.PRODUCT_ADDED_TO_CART\n      }\n    );\n  }\n};\n","export const Events = {\n  LOGIN_MODAL_VISIBILITY_UPDATED: \"LOGIN_MODAL_VISIBILITY_UPDATED\",\n  LOGIN_MODAL_REQUESTED: \"LOGIN_MODAL_REQUESTED\",\n  LOGOUT_USER_REQUESTED: \"LOGOUT_USER_REQUESTED\",\n  USER_LOGGED_OUT: \"USER_LOGGED_OUT\",\n  USER_SUCCESSFULLY_AUTHENTICATED: \"USER_SUCCESSFULLY_AUTHENTICATED\"\n};\n","export const Commands = {\n  UPDATE_LOGIN_MODAL_VISIBILITY: \"UPDATE_LOGIN_MODAL_VISIBILITY\",\n\n  AUTHENTICATE_USER: \"AUTHENTICATE_USER\"\n};\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\nimport * as MockAPI from \"../api/mockApi\";\n\nexport const cmdHideLoginScreenHandler = {\n  command: Commands.UPDATE_LOGIN_MODAL_VISIBILITY,\n  handler: (aggregateState, payload) => ({\n    events: [{ id: Events.LOGIN_MODAL_VISIBILITY_UPDATED, payload }]\n  })\n};\n\nexport const cmdAuthenticateUserHandler = {\n  command: Commands.AUTHENTICATE_USER,\n  handler: async (aggregateState, { username, password }) => {\n    const authenticationResult = await MockAPI.authenticate(username, password);\n    let events = [];\n    const { status } = authenticationResult;\n    if (status === \"ok\") {\n      const { jwt } = authenticationResult;\n      events = events.concat([\n        {\n          id: Events.USER_SUCCESSFULLY_AUTHENTICATED,\n          payload: { jwt, username }\n        }\n      ]);\n    }\n\n    return {\n      events\n    };\n  }\n};\n\nexport const cmdHandlers = [\n  cmdHideLoginScreenHandler,\n  cmdAuthenticateUserHandler\n];\n","const RPC_FAKE_DELAY = 1000;\nexport const authenticate = (username, password) => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({ status: \"ok\", jwt: \"fake.jwt.token\" });\n    }, RPC_FAKE_DELAY);\n  });\n};\n","import { Events } from \"../verbs/events\";\n\nexport const evtUpdateLoginModalVisibilityHandler = {\n  command: Events.LOGIN_MODAL_VISIBILITY_UPDATED,\n  handler: (aggregateState, { show }) => ({\n    proposal: {\n      ...aggregateState,\n      loginModalVisible: show\n    }\n  })\n};\n\nexport const evtLoginModalRequestedHandler = {\n  command: Events.LOGIN_MODAL_REQUESTED,\n  handler: aggregateState => {\n    return {\n      events: [\n        { id: Events.LOGIN_MODAL_VISIBILITY_UPDATED, payload: { show: true } }\n      ]\n    };\n  }\n};\n\nexport const evtLogoutUserRequestedHandler = {\n  command: Events.LOGOUT_USER_REQUESTED,\n  handler: aggregateState => {\n    return {\n      proposal: {\n        ...aggregateState,\n        userLogged: false,\n        jwt: null,\n        username: null\n      },\n      events: [{ id: Events.USER_LOGGED_OUT }]\n    };\n  }\n};\n\nexport const evtUserSuccessfullyAuthenticatedHandler = {\n  command: Events.USER_SUCCESSFULLY_AUTHENTICATED,\n  handler: (aggregateState, { jwt, username }) => ({\n    proposal: {\n      ...aggregateState,\n      userLogged: true,\n      loginModalVisible: false,\n      jwt,\n      username\n    }\n  })\n};\n\nexport const evtHandlers = [\n  evtUpdateLoginModalVisibilityHandler,\n  evtLoginModalRequestedHandler,\n  evtUserSuccessfullyAuthenticatedHandler,\n  evtLogoutUserRequestedHandler\n];\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\nexport const showLoginScreen = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.UPDATE_LOGIN_MODAL_VISIBILITY,\n    { show: true }\n  );\n};\n\nexport const hideLoginScreen = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.UPDATE_LOGIN_MODAL_VISIBILITY,\n    { show: false }\n  );\n};\n\nexport const simulateSuccessfulLogin = (username, password) => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.AUTHENTICATE_USER,\n    { username, password }\n  );\n};\n","import React, { Component, useState, useEffect } from \"react\";\nimport { Button, Header, Icon, Modal, Form } from \"semantic-ui-react\";\nimport { useObserveAggregateState } from \"../../../../subwayUtils\";\nimport {\n  hideLoginScreen,\n  simulateSuccessfulLogin\n} from \"../../commandCreators\";\n\nexport function LoginModal() {\n  const [authInProgress, setAuthInProgress] = useState(false);\n  const [isLoginModalVisible] = useObserveAggregateState(\n    \"SessionAggregate\",\n    aggregateState => aggregateState.loginModalVisible\n  );\n\n  useEffect(() => {\n    setAuthInProgress(false);\n  }, [isLoginModalVisible]);\n\n  return (\n    <Modal\n      open={isLoginModalVisible}\n      dimmer=\"blurring\"\n      size=\"mini\"\n      onClose={() => hideLoginScreen()}\n      size=\"small\"\n    >\n      <Header color=\"teal\" icon=\"user\" content=\"Enter your credentials\" />\n      <Modal.Content>\n        <Form>\n          <Form.Field>\n            <Form.Input disabled value=\"testuser\" label=\"Enter Username\" />\n          </Form.Field>\n          <Form.Field>\n            <Form.Input\n              disabled\n              value=\"password\"\n              label=\"Enter Password\"\n              type=\"password\"\n            />\n          </Form.Field>\n        </Form>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          disabled={authInProgress}\n          color=\"grey\"\n          onClick={() => hideLoginScreen()}\n        >\n          <Icon name=\"cancel\" /> Cancel\n        </Button>\n\n        <Button\n          loading={authInProgress}\n          disabled={authInProgress}\n          color=\"teal\"\n          onClick={() => {\n            setAuthInProgress(true);\n            simulateSuccessfulLogin(\"MichaelJordan23\", \"aPassword\");\n          }}\n        >\n          <Icon name=\"checkmark\" /> Simulate Successful Login\n        </Button>\n      </Modal.Actions>\n    </Modal>\n  );\n}\n","import { Subway } from \"../../subwayUtils/\";\nimport { Events } from \"./verbs/events\";\nimport { Commands } from \"./verbs/commands\";\n\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport const AGGREGATE_NAME = \"SessionAggregate\";\nexport const initialState = {\n  userLogged: false,\n  loginModalVisible: false,\n  jwt: null,\n  username: null\n};\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState,\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => {\n    // TODO quick mapping command => event in nav login button\n\n    Subway.selectAggregate(\"*\").triggerAfter(\"LOGIN_MODAL_REQUEST_SUBMITTED\", {\n      targetAggregate: AGGREGATE_NAME,\n      triggeredEvent: Events.LOGIN_MODAL_REQUESTED\n    });\n    Subway.selectAggregate(\"*\").triggerAfter(\"LOGOUT_USER_REQUEST_SUBMITTED\", {\n      targetAggregate: AGGREGATE_NAME,\n      triggeredEvent: Events.LOGOUT_USER_REQUESTED\n    });\n  }\n};\n\nexport { LoginModal } from \"./ui/containers/loginModal\";\n","import React from \"react\";\nimport { Container } from \"semantic-ui-react\";\n\nimport { useObserveAggregateState } from \"./subwayUtils/\";\n\nimport { Navbar, Breadcrumbs } from \"./aggregates/navigation\";\nimport { ProductList, ProductDetails, Disclaimer } from \"./aggregates/products\";\nimport {\n  HeaderShoppingCartDropdown,\n  Checkout\n} from \"./aggregates/shoppingCart\";\n\nimport { LoginModal } from \"./aggregates/session\";\nfunction App() {\n  const [currentPage] = useObserveAggregateState(\n    \"NavigationAggregate\",\n    aggregateState => aggregateState.currentPage\n  );\n\n  return (\n    <div style={{ background: \"#f8f9fa\" }}>\n      <Container>\n        <LoginModal />\n        <Navbar shoppingCartMenuItem={<HeaderShoppingCartDropdown />} />\n        <br />\n        <br />\n        <br />\n        <br />\n        <Breadcrumbs />\n        <br />\n        <br />\n        {(!currentPage || currentPage === \"home\") && <ProductList />}\n        {currentPage === \"product\" && <ProductDetails />}\n        {currentPage === \"checkout\" && <Checkout />}\n\n        <Disclaimer />\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import { Subway } from \"./\";\n\nexport const initHandlers = (aggregate, cmdHandlers, evtHandlers) => {\n  cmdHandlers &&\n    cmdHandlers.forEach(({ command, handler, onError = null }) => {\n      aggregate.setCommandHandler(command, handler, onError);\n    });\n  evtHandlers &&\n    evtHandlers.forEach(({ command, handler, onError = null }) => {\n      aggregate.setEventHandler(command, handler, onError);\n    });\n};\n\n// NOTE provide helper in the library itself?\nexport const initAggregates = aggregates => {\n  aggregates.forEach(\n    ({ name, initialState = {}, cmdHandlers, evtHandlers }) => {\n      const _agg = Subway.createAggregate(name, initialState);\n      initHandlers(_agg, cmdHandlers, evtHandlers);\n    }\n  );\n  aggregates.forEach(({ bootstrap = () => {} }) => bootstrap());\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { initAggregates } from \"./subwayUtils\";\nimport { aggregateConfig as productAggregateConfig } from \"./aggregates/products\";\nimport { aggregateConfig as navigationAggregateConfig } from \"./aggregates/navigation\";\nimport { aggregateConfig as shoppingCartAggregateConfig } from \"./aggregates/shoppingCart\";\nimport { aggregateConfig as sessionAggregateConfig } from \"./aggregates/session\";\n\n// TODO move to SubwayJS utils?\ninitAggregates([\n  sessionAggregateConfig,\n  productAggregateConfig,\n  navigationAggregateConfig,\n  shoppingCartAggregateConfig\n]);\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
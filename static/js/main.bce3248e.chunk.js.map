{"version":3,"sources":["subwayUtils/subwayRef.js","subwayUtils/customSubwayHooks.js","aggregates/navigation/verbs/events.js","aggregates/navigation/verbs/commands.js","aggregates/navigation/handlers/commands.js","aggregates/navigation/handlers/events.js","aggregates/navigation/ui/containers/navbar.js","aggregates/navigation/commandCreators.js","aggregates/navigation/ui/containers/breadcrumbs.js","aggregates/navigation/index.js","aggregates/products/verbs/commands.js","aggregates/products/commandCreators.js","aggregates/products/verbs/events.js","aggregates/products/api/data.js","aggregates/products/handlers/commands.js","aggregates/products/api/mockApi.js","aggregates/products/handlers/events.js","aggregates/products/ui/components/addToCartButton.js","aggregates/products/ui/containers/productList.js","aggregates/products/ui/containers/productDetails.js","aggregates/products/index.js","aggregates/shoppingCart/verbs/events.js","aggregates/shoppingCart/handlers/events.js","aggregates/shoppingCart/ui/containers/headerShoppingCartDropdown.js","aggregates/shoppingCart/index.js","aggregates/shoppingCart/handlers/commands.js","App.js","subwayUtils/utils.js","serviceWorker.js","index.js"],"names":["Subway","window","useObserveAggregateState","aggregateName","selector","once","useState","data","setData","useEffect","console","log","selectAggregate","observeState","next","nextState","unsubscribe","currentState","e","Events","Commands","cmdHandlers","command","handler","events","id","evtHandlers","aggregateState","proposal","currentPage","Navbar","shoppingCartMenuItem","Menu","pointing","secondary","color","fixed","style","background","Container","Item","Header","as","position","selectHomePage","AGGREGATE_NAME","sendCommand","Breadcrumbs","eventID","spy","eventPayload","useSpyAggregateEvent","product","title","selectedProduct","NAVIGATION_AGGREGATE_NAME","Grid","relaxed","columns","Column","Breadcrumb","Section","active","link","onClick","Divider","textAlign","Button","size","content","icon","labelPosition","aggregateConfig","name","initialState","bootstrap","triggerAfter","targetAggregate","triggeredEvent","triggerAddToShoppingCart","img","price","ccy","rating","reviewsCount","newPrice","payload","a","async","Promise","resolve","reject","setTimeout","productsList","AddToCartButton","loading","setLoading","fluid","Content","Icon","ProductList","detailsButtonHoveredId","setDetailsButtonHoveredId","PRODUCTS_AGGREGATE_NAME","productList","map","key","Card","Image","label","corner","Dimmer","Dimmable","onMouseOver","onMouseLeave","dimmed","src","wrapped","basic","selectProductForDetails","Meta","Rating","disabled","defaultRating","maxRating","Description","Label","tag","extra","ProductDetails","Segment","Group","horizontal","compact","i","items","has","prod","get","set","count","HeaderShoppingCartDropdown","SHOPPING_CART_AGGREGATE_NAME","Map","cartItems","Array","from","item","Popup","on","trigger","marginLeft","length","circular","reduce","acc","curr","Subheader","divided","className","toFixed","App","aggregates","Boolean","location","hostname","match","productAggregateConfig","navigationAggregateConfig","shoppingCartAggregateConfig","forEach","aggregate","onError","setCommandHandler","setEventHandler","initHandlers","createAggregate","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"2OAAaA,EAASC,OAAOD,OCGhBE,EAA2B,SACtCC,EACAC,GAEI,IADJC,EACG,0DACqBC,mBAAS,MAD9B,mBACIC,EADJ,KACUC,EADV,KAuBH,OApBAC,qBAAU,WACRC,QAAQC,IAAI,sCACZ,IAFc,EAEYX,EAAOY,gBAAgBT,GACOU,aAAa,CACnEC,KAAM,YAAoB,IAAjBC,EAAgB,EAAhBA,UACPP,EAAQJ,EAASW,IACbV,GAAMW,OAHNC,EAHM,EAGNA,aAAcD,EAHR,EAGQA,YAQtB,OAFAR,EAAQJ,EAASa,IAEV,WACL,IACED,IACA,MAAOE,QAIV,IAEI,CAACX,IC9BGY,EACY,wBADZA,EAES,qBCFTC,EACO,mBCgBPC,EAAc,CAda,CACtCC,QAASF,EACTG,QAAS,iBAAO,CACdC,OAAQ,CAAC,CAAEC,GAAIN,Q,QCgBNO,EAAc,CApBe,CACxCJ,QAASH,EACTI,QAAS,SAAAI,GAAc,MAAK,CAC1BC,SAAS,eACJD,EADG,CAENE,YAAa,YAK0B,CAC3CP,QAASH,EACTI,QAAS,SAAAI,GAAc,MAAK,CAC1BC,SAAS,eACJD,EADG,CAENE,YAAa,gB,kBCdZ,SAASC,EAAT,GAA2C,IAAzBC,EAAwB,EAAxBA,qBACvB,OACE,kBAACC,EAAA,EAAD,CACEC,UAAQ,EACRC,WAAS,EACTC,MAAM,OACNC,MAAM,MACNC,MAAO,CAAEC,WAAY,UAErB,kBAACC,EAAA,EAAD,KACE,kBAACP,EAAA,EAAKQ,KAAN,KACE,kBAACC,EAAA,EAAD,CAAQC,GAAG,KAAKP,MAAM,QAAtB,mBAKF,kBAACH,EAAA,EAAKQ,KAAN,CAAWG,SAAS,SACjBZ,K,+BCVEa,EAAiB,WAC5B5C,EAAOY,gBAAgBiC,GAAgBC,YAAY1B,ICA9C,SAAS2B,IAAe,IAAD,EPyBM,SAAC5C,EAAe6C,EAAS5C,GAAc,IAAD,EAChDE,mBAAS,MADuC,mBACjEC,EADiE,KAC3DC,EAD2D,KAexE,OAZAC,qBAAU,WACR,IAAMO,EAAchB,EAAOY,gBAAgBT,GAAe8C,IAAID,EAAS,CACrElC,KAAM,SAAAoC,GACJ1C,EAAQJ,EAAS8C,OAIrB,OAAO,WACLlC,OAED,IAEI,CAACT,GOvCkB4C,CACxB,oBACA,6BACA,gBAAGC,EAAH,EAAGA,QAAH,MAAkB,CAAE3B,GAAI2B,EAAQ3B,GAAI4B,MAAOD,EAAQC,UAH9CC,EADqB,sBAONpD,EACpBqD,GACA,SAAA5B,GAAc,OAAIA,EAAeE,eAF5BA,EAPqB,oBAY5B,OACE,kBAAC2B,EAAA,EAAD,CAAMC,SAAO,EAACC,QAAS,GACrB,kBAACF,EAAA,EAAKG,OAAN,KACE,kBAACC,EAAA,EAAD,KACmB,SAAhB/B,GACC,kBAAC+B,EAAA,EAAWC,QAAZ,CAAoBC,QAAM,GAA1B,YAEe,YAAhBjC,GACCyB,GACAA,EAAgB7B,IAChB6B,EAAgBD,OACd,oCACE,kBAACO,EAAA,EAAWC,QAAZ,CACEC,QAAM,EACNC,MAAI,EACJC,QAAS,kBAAMpB,MAHjB,YAOA,kBAACgB,EAAA,EAAWK,QAAZ,MACA,kBAACL,EAAA,EAAWC,QAAZ,CAAoBC,QAAM,GACvBR,EAAgBD,UAMZ,YAAhBxB,GACC,kBAAC2B,EAAA,EAAKG,OAAN,CAAaO,UAAU,SACrB,kBAACC,EAAA,EAAD,CACEH,QAAS,kBAAMpB,KACfwB,KAAK,OACLC,QAAQ,mBACRC,KAAK,aACLnC,MAAM,OACNoC,cAAc,WChDnB,IAAM1B,EAAiB,sBAMjB2B,EAAkB,CAC7BC,KAAM5B,EACN6B,aANmB,CACnB7C,YAAa,QAMbR,cACAK,cACAiD,UAAW,WACT3E,EAAOY,gBAAgB,qBAAqBgE,aAC1C,4BACA,CACEC,gBAAiBhC,EACjBiC,eAAgB3D,MC1BXC,EACS,mBADTA,EAEiB,0BAFjBA,EAGmB,2BCcnB2D,EAA2B,SAAA3B,GACtCpD,EAAOY,gBAAgBiC,GAAgBC,YACrC1B,EACA,CAAEgC,a,iBCpBOjC,EACW,qBADXA,EAEmB,4BAFnBA,EAGqB,iCCHrBZ,EAAO,CAClB,CACEkB,GAAI,EACJuD,IAAK,yBACL3B,MAAO,qBACP4B,MAAO,SACPC,IAAK,IACLC,OAAQ,IACRC,aAAc,KAEhB,CACE3D,GAAI,EACJuD,IAAK,wBACL3B,MAAO,0CACP4B,MAAO,UACPI,SAAU,UACVH,IAAK,IACLC,OAAQ,IACRC,aAAc,IAEhB,CACE3D,GAAI,EACJuD,IAAK,wBACL3B,MAAO,iDACP4B,MAAO,QACPC,IAAK,IACLC,OAAQ,IACRC,aAAc,IAEhB,CACE3D,GAAI,EACJuD,IAAK,yBACL3B,MAAO,uCACP4B,MAAO,SACPI,SAAU,SACVH,IAAK,IACLC,OAAQ,IACRC,aAAc,KAEhB,CACE3D,GAAI,EACJuD,IAAK,wBACL3B,MAAO,gCACP4B,MAAO,QACPI,SAAU,QACVH,IAAK,IACLC,OAAQ,IACRC,aAAc,IAEhB,CACE3D,GAAI,EACJuD,IAAK,yBACL3B,MAAO,+CACP4B,MAAO,SACPC,IAAK,IACLC,OAAQ,IACRC,aAAc,MCxBL/D,EAAc,CA3Be,CACxCC,QAASF,EACTG,QAAS,SAAOI,EAAgB2D,GAAvB,eAAAC,EAAAC,OAAA,kEAAAD,EAAA,MCHF,IAAIE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACTF,EAAQnF,KAJS,SDKZ,cACDsF,EADC,yBAEA,CACLrE,OAAQ,CAAC,CAAEC,GAAIN,EAA6BmE,QAAS,CAAEO,oBAHlD,uCAQsC,CAC/CvE,QAASF,EACTG,QAAS,SAACI,EAAD,OAAmByB,EAAnB,EAAmBA,QAAnB,MAAkC,CAEzC5B,OAAQ,CAAC,CAAEC,GAAIN,EAAqCmE,QAAS,CAAElC,gBAGjB,CAChD9B,QAASF,EACTG,QAAS,SAACI,EAAD,OAAmByB,EAAnB,EAAmBA,QAAnB,MAAkC,CAEzC5B,OAAQ,CACN,CAAEC,GAAIN,EAAuCmE,QAAS,CAAElC,iBEDjD1B,EAAc,CAxBiB,CAC1CJ,QAASH,EACTI,QAAS,SAACI,EAAD,GAAuC,IAApBkE,EAAmB,EAAnBA,aAC1B,MAAO,CACLjE,SAAS,eACJD,EADG,CAENkE,oBAM2C,CACjDvE,QAASH,EACTI,QAAS,SAACI,EAAD,GAAkC,IAAfyB,EAAc,EAAdA,QAC1B,MAAO,CACLxB,SAAS,eACJD,EADG,CAEN2B,gBAAiBF,Q,oDCjBlB,SAAS0C,EAAT,GAAsD,IAA3B1C,EAA0B,EAA1BA,QAASgB,EAAiB,EAAjBA,KAAMJ,EAAW,EAAXA,QAAW,EAC5B1D,oBAAS,GADmB,mBACnDyF,EADmD,KAC1CC,EAD0C,KAE1D,OACE,kBAAC7B,EAAA,EAAD,CACEC,KAAMA,EACN6B,OAAK,EACLF,QAASA,EACT5D,MAAM,OACN6B,QAAS,WACPgC,GAAW,GACXJ,YAAW,WACT5B,EAAQZ,GACR4C,GAAW,KACV,OAGL,kBAAC7B,EAAA,EAAO+B,QAAR,KACE,kBAACC,EAAA,EAAD,CAAM1B,KAAK,SADb,iBCIC,SAAS2B,IAAe,IAAD,EACgC9F,mBAAS,MADzC,mBACrB+F,EADqB,KACGC,EADH,OjBW5BpG,EiBPEqG,GACA,SAAA5E,GAAc,OAAIA,EAAekE,gBjBMe,GiBR3CW,EAHqB,oBAQ5B,OACE,kBAAChD,EAAA,EAAD,CAAME,QAAS,GACZ8C,GACCA,EAAYC,KAAI,SAAArD,GAAY,IAExB3B,EAQE2B,EARF3B,GACAuD,EAOE5B,EAPF4B,IACA3B,EAMED,EANFC,MACA4B,EAKE7B,EALF6B,MACAE,EAIE/B,EAJF+B,OACAC,EAGEhC,EAHFgC,aAPuB,EAUrBhC,EAFFiC,gBARuB,MAQZ,KARY,EASvBH,EACE9B,EADF8B,IAEF,OACE,kBAAC1B,EAAA,EAAKG,OAAN,CAAa+C,IAAKjF,GAChB,kBAACkF,EAAA,EAAD,KACGtB,GACC,kBAACuB,EAAA,EAAD,CACEX,OAAK,EACLY,MAAO,CACLnE,GAAI,IACJP,MAAO,SACP2E,OAAQ,OACRxC,KAAM,UAIZ,kBAACyC,EAAA,EAAOC,SAAR,CACEtE,GAAIkE,IACJK,YAAa,WACXX,EAA0B7E,IAE5ByF,aAAc,WACZZ,EAA0B,OAE5Ba,OAAQd,IAA2B5E,GAEnC,kBAACmF,EAAA,EAAD,CAAOQ,IAAKpC,EAAKqC,SAAO,IAExB,kBAACN,EAAA,EAAD,CAAQjD,OAAQuC,IAA2B5E,GACzC,kBAAC0C,EAAA,EAAD,CACEmD,OAAK,EACLlD,KAAK,QACLjC,MAAM,OACN6B,QAAS,kBPlEQ,SAAAZ,GACrCpD,EAAOY,gBAAgBiC,GAAgBC,YACrC1B,EACA,CAAEgC,YO+D+BmE,CAAwBnE,KAEvC,kBAACe,EAAA,EAAO+B,QAAR,KACE,kBAACC,EAAA,EAAD,CAAM1B,KAAK,YADb,uBAMN,kBAACkC,EAAA,EAAKT,QAAN,KACE,kBAACS,EAAA,EAAKlE,OAAN,CAAaC,GAAG,KAAKW,GACrB,kBAACsD,EAAA,EAAKa,KAAN,KACE,kBAACC,EAAA,EAAD,CACErD,KAAK,OACLsD,UAAQ,EACRpD,KAAK,OACLqD,cAAexC,EACfyC,UAAW,IACV,IACFxC,EARH,YAUCC,GACC,oCACE,kBAACsB,EAAA,EAAKkB,YAAN,KACE,gCACG3C,EACAD,GACO,IACV,kBAACkB,EAAA,EAAD,CAAM1B,KAAK,gBAAiB,IAC5B,kBAACqD,EAAA,EAAD,CAAOpF,GAAG,OAAOP,MAAM,SAAS4F,KAAG,GAChC7C,EACAG,MAKPA,GACA,kBAACsB,EAAA,EAAKkB,YAAN,KACG3C,EACAD,EAAO,MAId,kBAAC0B,EAAA,EAAKT,QAAN,CAAc8B,OAAK,GACjB,kBAAClC,EAAD,CACE1B,KAAK,QACLhB,QAASA,EACTY,QAASe,W,sBCxGtB,SAASkD,IAAkB,IAAD,EACb/H,EAChBqG,GACA,SAAA5E,GAAc,OAAIA,EAAe2B,mBAF5BF,EADwB,oBAM/B,OACE,oCACG,IACAA,GACC,kBAAC8E,EAAA,EAAQC,MAAT,CAAeC,YAAU,GACvB,kBAACF,EAAA,EAAD,KACE,kBAACtB,EAAA,EAAD,CAAOQ,IAAKhE,EAAQ4B,IAAKqC,SAAO,IAEhC,kBAACa,EAAA,EAAQC,MAAT,CAAeC,YAAU,EAACC,SAAO,GAC9B,CAAC,EAAG,EAAG,GAAG5B,KAAI,SAAA6B,GAAC,OACd,kBAACJ,EAAA,EAAD,CAASxB,IAAK4B,EAAGhB,OAAK,GACpB,kBAACV,EAAA,EAAD,CAAOQ,IAAKhE,EAAQ4B,IAAKZ,KAAK,eAKtC,kBAAC8D,EAAA,EAAD,KACE,kBAACzF,EAAA,EAAD,CAAQ2B,KAAK,QACVhB,EAAQC,MAAO,IACfD,EAAQiC,UACP,kBAACyC,EAAA,EAAD,CAAOpF,GAAG,OAAOP,MAAM,SAAS4F,KAAG,GAAnC,YAKJ,kBAACxF,EAAA,EAAD,KACE,kBAACkF,EAAA,EAAD,CACEC,UAAQ,EACRpD,KAAK,OACLqD,cAAevE,EAAQ+B,OACvByC,UAAW,IACV,IACFxE,EAAQgC,aAPX,YASA,6BACA,kBAAC7C,EAAA,EAAD,scAUA,6BAECa,EAAQiC,UACP,oCACE,kBAACyC,EAAA,EAAD,CAAOpF,GAAG,OAAOP,MAAM,OAAOmF,OAAK,EAAClD,KAAK,QACvC,gCACGhB,EAAQ8B,IACR9B,EAAQ6B,QAGb,kBAACkB,EAAA,EAAD,CAAM1B,KAAK,cAAcL,KAAK,QAC9B,kBAAC0D,EAAA,EAAD,CAAOpF,GAAG,OAAOP,MAAM,SAASiC,KAAK,QAClChB,EAAQ8B,IACR9B,EAAQiC,YAIbjC,EAAQiC,UACR,kBAAC5C,EAAA,EAAD,CAAQ2B,KAAK,QACVhB,EAAQ8B,IACR9B,EAAQ6B,OAIb,kBAAChB,EAAA,EAAD,MACA,kBAAC6B,EAAD,CACE1B,KAAK,OACLhB,QAASA,EACTY,QAASe,OC5FhB,IAAMlC,EAAiB,oBASjB2B,EAAkB,CAC7BC,KAAM5B,EACN6B,aAVmB,CACnBmB,aAAc,GACdvC,gBAAiB,MASjBjC,cACAK,cACAiD,UAAW,WTdX3E,EAAOY,gBAAgBiC,GAAgBC,YACrC1B,KUNSD,EACY,wBCuBZO,EAAc,CAtBiB,CAC1CJ,QAASH,EACTI,QAAS,SAACI,EAAD,GAAkC,IAAfyB,EAAc,EAAdA,QAIlBmF,EAAU5G,EAAV4G,MACR,GAAIA,EAAMC,IAAIpF,EAAQ3B,IAAK,CACzB,IAAMgH,EAAOF,EAAMG,IAAItF,EAAQ3B,IAC/B8G,EAAMI,IAAIvF,EAAQ3B,GAAlB,eAA2B2B,EAA3B,CAAoCwF,MAAOH,EAAKG,MAAQ,UAExDL,EAAMI,IAAIvF,EAAQ3B,GAAlB,eAA2B2B,EAA3B,CAAoCwF,MAAO,KAE7C,MAAO,CACLhH,SAAS,eACJD,EADG,CAEN4G,c,oBCLD,SAASM,GAAT,GAA8C,EAARzE,KAAS,IAAD,EAC5BlE,EACrB4I,IACA,SAAAnH,GAAc,OAAIA,GAAkB,MAHa,wBAKL,IAAtC4G,aAL2C,MAKnC,IAAIQ,IAL+B,EAM7CC,EAAYC,MAAMC,KAAKX,GAAO9B,KAAI,SAAA0C,GAAI,sBAAUA,EAAK,OAC3D,OACE,kBAACC,GAAA,EAAD,CACEC,GAAG,QACH1G,SAAS,eACT2G,QACE,kBAACnF,EAAA,EAAD,CAAQmD,OAAK,EAACnF,MAAM,OAAOE,MAAO,CAAEkH,WAAY,UAC9C,kBAACpD,EAAA,EAAD,CAAM1B,KAAK,gBAAgBtC,MAAM,SAChC6G,GAAaA,EAAUQ,OAAS,GAC/B,kBAAC1B,EAAA,EAAD,CAAO2B,UAAQ,EAACrF,KAAK,OAAOjC,MAAM,QAC/B6G,EAAUU,QAAO,SAACC,EAAKC,GAAN,OAAgBD,IAAOC,EAAKhB,QAAO,MAM7D,kBAACQ,GAAA,EAAMlD,QAAP,OACK8C,GAAkC,IAArBA,EAAUQ,SACxB,kBAACtB,EAAA,EAAD,CAASZ,OAAK,EAACpD,UAAU,UACvB,kBAACiC,EAAA,EAAD,CAAM1B,KAAK,gBAAgBL,KAAK,MAAMjC,MAAM,SAC5C,kBAACM,EAAA,EAAD,CAAQ2B,KAAK,QACX,kBAAC3B,EAAA,EAAOoH,UAAR,sCAILb,GAAaA,EAAUQ,OAAS,GAC/B,kBAAChH,GAAA,EAAK2F,MAAN,CAAY2B,SAAO,GAChBd,EAAUvC,KACT,gBAAGhF,EAAH,EAAGA,GAAIuD,EAAP,EAAOA,IAAK3B,EAAZ,EAAYA,MAAO4B,EAAnB,EAAmBA,MAAOI,EAA1B,EAA0BA,SAAUH,EAApC,EAAoCA,IAAK0D,EAAzC,EAAyCA,MAAzC,OACE,kBAACpG,GAAA,EAAD,CAAMkE,IAAKjF,GACT,kBAACe,GAAA,EAAKoE,MAAN,CAAYxC,KAAK,OAAOgD,IAAKpC,IAE7B,kBAACxC,GAAA,EAAK0D,QAAN,KACE,kBAAC1D,GAAA,EAAKqF,YAAN,KACGe,GAASA,EAAQ,GAChB,kBAACd,EAAA,EAAD,CAAO2B,UAAQ,EAACrF,KAAK,OAAOjC,MAAM,SAAlC,IACIyG,GAEH,IACFvF,GAEH,kBAACb,GAAA,EAAKgF,KAAN,KACE,0BAAMuC,UAAU,SACb7E,GACCG,GAAYJ,GAAS2D,SAOnC,kBAACpG,GAAA,EAAD,KACE,kBAACA,GAAA,EAAKC,OAAN,CAAaC,GAAG,MAAhB,UACUsG,EAAU,GAAG9D,IAAK,IACzB8D,EACEU,QACC,SAACC,EAAKC,GAAN,OACGD,KAASC,EAAKvE,UAAYuE,EAAK3E,OAAS2E,EAAKhB,QAChD,GAEDoB,QAAQ,KAIf,kBAACxH,GAAA,EAAD,KACE,kBAACA,GAAA,EAAK0D,QAAN,KACE,kBAAC/B,EAAA,EAAD,CAAQ8B,OAAK,EAAC9D,MAAM,QAApB,iBC9ET,IAAMU,GAAiB,wBAMjB2B,GAAkB,CAC7BC,KAAM5B,GACN6B,aAAc,CAAE6D,MAAO,IAAIQ,KAC3B1H,YCLyB,GDMzBK,cACAiD,UAAW,WACT3E,EAAOY,gBAAgB,qBAAqBgE,aAC1C,iCACA,CACEC,gBAAiBhC,GACjBiC,eAAgB3D,MEUT8I,ICnBeC,GDmBfD,GAxBf,WAAgB,IAAD,EACS/J,EACpB,uBACA,SAAAyB,GAAc,OAAIA,EAAeE,eAF5BA,EADM,oBAMb,OACE,yBAAKQ,MAAO,CAAEC,WAAY,YACxB,kBAACC,EAAA,EAAD,KACE,kBAACT,EAAD,CAAQC,qBAAsB,kBAAC8G,GAAD,QAC9B,6BACA,6BACA,6BACA,6BACA,kBAAC9F,EAAD,MACA,6BACA,6BACmC,WAAhClB,GAAeA,IAA2B,kBAACuE,EAAD,MAC5B,YAAhBvE,GAA6B,kBAACoG,EAAD,SEflBkC,QACW,cAA7BlK,OAAOmK,SAASC,UAEe,UAA7BpK,OAAOmK,SAASC,UAEhBpK,OAAOmK,SAASC,SAASC,MACvB,4DDJwBJ,GEJf,CACbK,EACAC,EACAC,KFEWC,SACT,YAA4D,IAAzDjG,EAAwD,EAAxDA,KAAwD,IAAlDC,oBAAkD,MAAnC,GAAmC,EAA/BrD,EAA+B,EAA/BA,YAAaK,EAAkB,EAAlBA,aAdjB,SAACiJ,EAAWtJ,EAAaK,GACnDL,GACEA,EAAYqJ,SAAQ,YAA2C,IAAxCpJ,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,QAA8B,IAArBqJ,eAAqB,MAAX,KAAW,EAC5DD,EAAUE,kBAAkBvJ,EAASC,EAASqJ,MAElDlJ,GACEA,EAAYgJ,SAAQ,YAA2C,IAAxCpJ,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,QAA8B,IAArBqJ,eAAqB,MAAX,KAAW,EAC5DD,EAAUG,gBAAgBxJ,EAASC,EAASqJ,MAS5CG,CADa/K,EAAOgL,gBAAgBvG,EAAMC,GACvBrD,EAAaK,MAGpCwI,GAAWQ,SAAQ,oBAAG/F,UAAH,kBAAe,aAAf,QELrBsG,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SDmH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.bce3248e.chunk.js","sourcesContent":["export const Subway = window.Subway;\n","import { useState, useEffect } from \"react\";\nimport { Subway } from \"./subwayRef\";\n\nexport const useObserveAggregateState = (\n  aggregateName,\n  selector,\n  once = false\n) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    console.log(\">>>> useObserveAggregateState init\");\n    const productsAggregate = Subway.selectAggregate(aggregateName);\n    const { currentState, unsubscribe } = productsAggregate.observeState({\n      next: ({ nextState }) => {\n        setData(selector(nextState));\n        if (once) unsubscribe();\n      }\n    });\n    setData(selector(currentState));\n\n    return () => {\n      try {\n        unsubscribe();\n      } catch (e) {\n      } finally {\n      }\n    };\n  }, []);\n\n  return [data];\n};\n\nexport const useObserveAggregateStateOnce = (aggregateName, selector) =>\n  useObserveAggregateState(aggregateName, selector, true);\n\nexport const useSpyAggregateEvent = (aggregateName, eventID, selector) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = Subway.selectAggregate(aggregateName).spy(eventID, {\n      next: eventPayload => {\n        setData(selector(eventPayload));\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  return [data];\n};\n","export const Events = {\n  PRODUCT_PAGE_SELECTED: \"PRODUCT_PAGE_SELECTED\",\n  HOME_PAGE_SELECTED: \"HOME_PAGE_SELECTED\"\n};\n","export const Commands = {\n  SELECT_HOME_PAGE: \"SELECT_HOME_PAGE\",\n  SELECT_PRODUCT_PAGE: \"SELECT_PRODUCT_PAGE\"\n};\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\n\nexport const cmdSelectHomePageHandler = {\n  command: Commands.SELECT_HOME_PAGE,\n  handler: () => ({\n    events: [{ id: Events.HOME_PAGE_SELECTED }]\n  })\n};\n\n// export const cmdSelectProductPageHandler = {\n//   command: Commands.SELECT_PRODUCT_PAGE,\n//   handler: () => ({\n//     events: [{ id: Events.PRODUCT_PAGE_SELECTED }]\n//   })\n// };\n\nexport const cmdHandlers = [\n  cmdSelectHomePageHandler\n  // cmdSelectProductPageHandler\n];\n","import { Events } from \"../verbs/events\";\n\nexport const evtHomePageSelectedHandler = {\n  command: Events.HOME_PAGE_SELECTED,\n  handler: aggregateState => ({\n    proposal: {\n      ...aggregateState,\n      currentPage: \"home\"\n    }\n  })\n};\n\nexport const evtProductPageSelectedHandler = {\n  command: Events.PRODUCT_PAGE_SELECTED,\n  handler: aggregateState => ({\n    proposal: {\n      ...aggregateState,\n      currentPage: \"product\"\n    }\n  })\n};\n\nexport const evtHandlers = [\n  evtHomePageSelectedHandler,\n  evtProductPageSelectedHandler\n];\n","import React from \"react\";\nimport { Container, Menu, Header } from \"semantic-ui-react\";\n\nexport function Navbar({ shoppingCartMenuItem }) {\n  return (\n    <Menu\n      pointing\n      secondary\n      color=\"teal\"\n      fixed=\"top\"\n      style={{ background: \"white\" }}\n    >\n      <Container>\n        <Menu.Item>\n          <Header as=\"h2\" color=\"teal\">\n            SubwayJS eComm\n          </Header>\n        </Menu.Item>\n\n        <Menu.Item position=\"right\">\n          {shoppingCartMenuItem}\n          {/*<Button style={{ marginLeft: \"0.5em\" }}>Login</Button>*/}\n        </Menu.Item>\n      </Container>\n    </Menu>\n  );\n}\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\n// export const selectProductPage = () => {\n//   Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n//     Commands.SELECT_PRODUCT_PAGE\n//   );\n// };\n\nexport const selectHomePage = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(Commands.SELECT_HOME_PAGE);\n};\n","import React from \"react\";\nimport { Breadcrumb, Button, Grid } from \"semantic-ui-react\";\n\nimport {\n  useSpyAggregateEvent,\n  useObserveAggregateState\n} from \"../../../../subwayUtils/\";\nimport { selectHomePage } from \"../../commandCreators\";\n\nimport { AGGREGATE_NAME as NAVIGATION_AGGREGATE_NAME } from \"../../\";\n\nexport function Breadcrumbs() {\n  const [selectedProduct] = useSpyAggregateEvent(\n    \"ProductsAggregate\",\n    \"ProductSelectedForDetails\",\n    ({ product }) => ({ id: product.id, title: product.title })\n  );\n\n  const [currentPage] = useObserveAggregateState(\n    NAVIGATION_AGGREGATE_NAME,\n    aggregateState => aggregateState.currentPage\n  );\n\n  return (\n    <Grid relaxed columns={2}>\n      <Grid.Column>\n        <Breadcrumb>\n          {currentPage === \"home\" && (\n            <Breadcrumb.Section active>Products</Breadcrumb.Section>\n          )}\n          {currentPage === \"product\" &&\n            selectedProduct &&\n            selectedProduct.id &&\n            selectedProduct.title && (\n              <>\n                <Breadcrumb.Section\n                  active\n                  link\n                  onClick={() => selectHomePage()}\n                >\n                  Products\n                </Breadcrumb.Section>\n                <Breadcrumb.Divider />\n                <Breadcrumb.Section active>\n                  {selectedProduct.title}\n                </Breadcrumb.Section>\n              </>\n            )}\n        </Breadcrumb>\n      </Grid.Column>\n      {currentPage === \"product\" && (\n        <Grid.Column textAlign=\"right\">\n          <Button\n            onClick={() => selectHomePage()}\n            size=\"tiny\"\n            content=\"Back to products\"\n            icon=\"angle left\"\n            color=\"teal\"\n            labelPosition=\"left\"\n          />\n        </Grid.Column>\n      )}\n    </Grid>\n  );\n}\n","import { Subway } from \"../../subwayUtils/\";\n\nimport { Events } from \"./verbs/events\";\n\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport { Navbar } from \"./ui/containers/navbar\";\nexport { Breadcrumbs } from \"./ui/containers/breadcrumbs\";\n\nexport const AGGREGATE_NAME = \"NavigationAggregate\";\n\nconst initialState = {\n  currentPage: \"home\"\n};\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState,\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => {\n    Subway.selectAggregate(\"ProductsAggregate\").triggerAfter(\n      \"ProductSelectedForDetails\",\n      {\n        targetAggregate: AGGREGATE_NAME,\n        triggeredEvent: Events.PRODUCT_PAGE_SELECTED\n      }\n    );\n  }\n};\n","export const Commands = {\n  LOAD_PRODUCTS_LIST: \"LoadProductsList\",\n  SELECT_PRODUCT_FOR_DETAILS: \"SelectProductForDetails\",\n  TRIGGER_ADD_TO_SHOPPING_CART: \"TriggerAddToShoppingCart\"\n};\n","import { AGGREGATE_NAME } from \"./index\";\nimport { Commands } from \"./verbs/commands\";\nimport { Subway } from \"../../subwayUtils/\";\n\nexport const loadProductsList = () => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.LOAD_PRODUCTS_LIST\n  );\n};\n\nexport const selectProductForDetails = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.SELECT_PRODUCT_FOR_DETAILS,\n    { product }\n  );\n};\n\nexport const triggerAddToShoppingCart = product => {\n  Subway.selectAggregate(AGGREGATE_NAME).sendCommand(\n    Commands.TRIGGER_ADD_TO_SHOPPING_CART,\n    { product }\n  );\n};\n","export const Events = {\n  PRODUCTS_LIST_LOADED: \"ProductsListLoaded\",\n  PRODUCT_SELECTED_FOR_DETAILS: \"ProductSelectedForDetails\",\n  ADD_TO_SHOPPING_CART_TRIGGERED: \"ADD_TO_SHOPPING_CART_TRIGGERED\"\n};\n","export const data = [\n  {\n    id: 1,\n    img: \"images/products/11.jpg\",\n    title: \"GoPro HERO7 Camera\",\n    price: \"299.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 132\n  },\n  {\n    id: 2,\n    img: \"images/products/5.jpg\",\n    title: \"Leather Sleeve - Macbook 13’’\",\n    price: \"3753.00\",\n    newPrice: \"3099.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 56\n  },\n  {\n    id: 3,\n    img: \"images/products/4.jpg\",\n    title: \"Fjällräven Kånken Backpack Blue Ridge\",\n    price: \"84.00\",\n    ccy: \"$\",\n    rating: \"5\",\n    reviewsCount: 85\n  },\n  {\n    id: 4,\n    img: \"images/products/12.jpg\",\n    title: \"Off-White Odsy-1000 Low-Top Sneakers\",\n    price: \"815.00\",\n    newPrice: \"799.00\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 422\n  },\n  {\n    id: 5,\n    img: \"images/products/9.jpg\",\n    title: \"Logitech - Headset for gaming\",\n    price: \"19.00\",\n    newPrice: \"14.99\",\n    ccy: \"$\",\n    rating: \"3\",\n    reviewsCount: 23\n  },\n  {\n    id: 6,\n    img: \"images/products/10.jpg\",\n    title: \"Apple Homkit - Ecobee3 Lite Smart Thermostat\",\n    price: \"169.95\",\n    ccy: \"$\",\n    rating: \"4\",\n    reviewsCount: 198\n  }\n];\n","import { Commands } from \"../verbs/commands\";\nimport { Events } from \"../verbs/events\";\n\nimport * as MockAPI from \"../api/mockApi\";\n\nexport const cmdLoadProductsListHandler = {\n  command: Commands.LOAD_PRODUCTS_LIST,\n  handler: async (aggregateState, payload) => {\n    const productsList = await MockAPI.getProductsList();\n    return {\n      events: [{ id: Events.PRODUCTS_LIST_LOADED, payload: { productsList } }]\n    };\n  }\n};\n\nexport const cmdSelectProductForDetailsHandler = {\n  command: Commands.SELECT_PRODUCT_FOR_DETAILS,\n  handler: (aggregateState, { product }) => ({\n    // TODO load product details???\n    events: [{ id: Events.PRODUCT_SELECTED_FOR_DETAILS, payload: { product } }]\n  })\n};\nexport const cmdTriggerAddToShoppingCartHandler = {\n  command: Commands.TRIGGER_ADD_TO_SHOPPING_CART,\n  handler: (aggregateState, { product }) => ({\n    // TODO allow external aggregate?\n    events: [\n      { id: Events.ADD_TO_SHOPPING_CART_TRIGGERED, payload: { product } }\n    ]\n  })\n};\n\nexport const cmdHandlers = [\n  cmdLoadProductsListHandler,\n  cmdSelectProductForDetailsHandler,\n  cmdTriggerAddToShoppingCartHandler\n];\n","import { data } from \"./data\";\n\nconst RPC_FAKE_DELAY = 500;\nexport const getProductsList = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(data);\n    }, RPC_FAKE_DELAY);\n  });\n};\n","import { Events } from \"../verbs/events\";\n\nexport const evtProductsListLoadedHandler = {\n  command: Events.PRODUCTS_LIST_LOADED,\n  handler: (aggregateState, { productsList }) => {\n    return {\n      proposal: {\n        ...aggregateState,\n        productsList\n      }\n    };\n  }\n};\n\nexport const evtProductSelectedForDetailsHandler = {\n  command: Events.PRODUCT_SELECTED_FOR_DETAILS,\n  handler: (aggregateState, { product }) => {\n    return {\n      proposal: {\n        ...aggregateState,\n        selectedProduct: product\n      }\n    };\n  }\n};\n\nexport const evtHandlers = [\n  evtProductsListLoadedHandler,\n  evtProductSelectedForDetailsHandler\n];\n","import React, { useState } from \"react\";\nimport { Button, Icon } from \"semantic-ui-react\";\n\nexport function AddToCartButton({ product, size, onClick }) {\n  const [loading, setLoading] = useState(false);\n  return (\n    <Button\n      size={size}\n      fluid\n      loading={loading}\n      color=\"teal\"\n      onClick={() => {\n        setLoading(true);\n        setTimeout(() => {\n          onClick(product);\n          setLoading(false);\n        }, 500);\n      }}\n    >\n      <Button.Content>\n        <Icon name=\"shop\" /> Add to cart\n      </Button.Content>\n    </Button>\n  );\n}\n","import React, { useState } from \"react\";\nimport {\n  Grid,\n  Image,\n  Label,\n  Icon,\n  Card,\n  Rating,\n  Button,\n  Dimmer\n} from \"semantic-ui-react\";\n\nimport { useObserveAggregateStateOnce } from \"../../../../subwayUtils/\";\n\nimport { AGGREGATE_NAME as PRODUCTS_AGGREGATE_NAME } from \"../../\";\n\nimport {\n  selectProductForDetails,\n  triggerAddToShoppingCart\n} from \"../../commandCreators\";\n\nimport { AddToCartButton } from \"../components/addToCartButton\";\n\nexport function ProductList() {\n  const [detailsButtonHoveredId, setDetailsButtonHoveredId] = useState(null);\n\n  const [productList] = useObserveAggregateStateOnce(\n    PRODUCTS_AGGREGATE_NAME,\n    aggregateState => aggregateState.productsList\n  );\n\n  return (\n    <Grid columns={3}>\n      {productList &&\n        productList.map(product => {\n          const {\n            id,\n            img,\n            title,\n            price,\n            rating,\n            reviewsCount,\n            newPrice = null,\n            ccy\n          } = product;\n          return (\n            <Grid.Column key={id}>\n              <Card>\n                {newPrice && (\n                  <Image\n                    fluid\n                    label={{\n                      as: \"a\",\n                      color: \"orange\",\n                      corner: \"left\",\n                      icon: \"star\"\n                    }}\n                  />\n                )}\n                <Dimmer.Dimmable\n                  as={Image}\n                  onMouseOver={() => {\n                    setDetailsButtonHoveredId(id);\n                  }}\n                  onMouseLeave={() => {\n                    setDetailsButtonHoveredId(null);\n                  }}\n                  dimmed={detailsButtonHoveredId === id}\n                >\n                  <Image src={img} wrapped />\n\n                  <Dimmer active={detailsButtonHoveredId === id}>\n                    <Button\n                      basic\n                      size=\"small\"\n                      color=\"teal\"\n                      onClick={() => selectProductForDetails(product)}\n                    >\n                      <Button.Content>\n                        <Icon name=\"magnify\" /> Product details\n                      </Button.Content>\n                    </Button>\n                  </Dimmer>\n                </Dimmer.Dimmable>\n                <Card.Content>\n                  <Card.Header as=\"a\">{title}</Card.Header>\n                  <Card.Meta>\n                    <Rating\n                      size=\"mini\"\n                      disabled\n                      icon=\"star\"\n                      defaultRating={rating}\n                      maxRating={5}\n                    />{\" \"}\n                    {reviewsCount} Reviews\n                  </Card.Meta>\n                  {newPrice && (\n                    <>\n                      <Card.Description>\n                        <strike>\n                          {ccy}\n                          {price}\n                        </strike>{\" \"}\n                        <Icon name=\"arrow right\" />{\" \"}\n                        <Label as=\"span\" color=\"orange\" tag>\n                          {ccy}\n                          {newPrice}\n                        </Label>\n                      </Card.Description>\n                    </>\n                  )}\n                  {!newPrice && (\n                    <Card.Description>\n                      {ccy}\n                      {price}{\" \"}\n                    </Card.Description>\n                  )}\n                </Card.Content>\n                <Card.Content extra>\n                  <AddToCartButton\n                    size=\"small\"\n                    product={product}\n                    onClick={triggerAddToShoppingCart}\n                  />\n                  {\n                    // <Button size=\"small\" fluid color=\"teal\">\n                    //   <Button.Content>\n                    //     <Icon name=\"shop\" /> Add to cart\n                    //   </Button.Content>\n                    // </Button>\n                  }\n                </Card.Content>\n              </Card>\n            </Grid.Column>\n          );\n        })}\n    </Grid>\n  );\n}\n","import React from \"react\";\nimport {\n  Segment,\n  Image,\n  Header,\n  Container,\n  Rating,\n  Divider,\n  Icon,\n  Label\n} from \"semantic-ui-react\";\n\nimport { AGGREGATE_NAME as PRODUCTS_AGGREGATE_NAME } from \"../../\";\n\nimport { useObserveAggregateState } from \"../../../../subwayUtils/\";\nimport { AddToCartButton } from \"../components/addToCartButton\";\nimport { triggerAddToShoppingCart } from \"../../commandCreators\";\n\nexport function ProductDetails() {\n  const [product] = useObserveAggregateState(\n    PRODUCTS_AGGREGATE_NAME,\n    aggregateState => aggregateState.selectedProduct\n  );\n\n  return (\n    <>\n      {\" \"}\n      {product && (\n        <Segment.Group horizontal>\n          <Segment>\n            <Image src={product.img} wrapped />\n\n            <Segment.Group horizontal compact>\n              {[1, 2, 3].map(i => (\n                <Segment key={i} basic>\n                  <Image src={product.img} size=\"tiny\" />\n                </Segment>\n              ))}\n            </Segment.Group>\n          </Segment>\n          <Segment>\n            <Header size=\"huge\">\n              {product.title}{\" \"}\n              {product.newPrice && (\n                <Label as=\"span\" color=\"orange\" tag>\n                  ON SALE\n                </Label>\n              )}\n            </Header>\n            <Container>\n              <Rating\n                disabled\n                icon=\"star\"\n                defaultRating={product.rating}\n                maxRating={5}\n              />{\" \"}\n              {product.reviewsCount} Reviews\n            </Container>\n            <br />\n            <Container>\n              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n              enim ad minim veniam, quis nostrud exercitation ullamco laboris\n              nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in\n              reprehenderit in voluptate velit esse cillum dolore eu fugiat\n              nulla pariatur. Excepteur sint occaecat cupidatat non proident,\n              sunt in culpa qui officia deserunt mollit anim id est laborum.\n            </Container>\n\n            <br />\n\n            {product.newPrice && (\n              <>\n                <Label as=\"span\" color=\"grey\" basic size=\"huge\">\n                  <strike>\n                    {product.ccy}\n                    {product.price}\n                  </strike>\n                </Label>\n                <Icon name=\"arrow right\" size=\"big\" />\n                <Label as=\"span\" color=\"orange\" size=\"huge\">\n                  {product.ccy}\n                  {product.newPrice}\n                </Label>\n              </>\n            )}\n            {!product.newPrice && (\n              <Header size=\"huge\">\n                {product.ccy}\n                {product.price}\n              </Header>\n            )}\n\n            <Divider />\n            <AddToCartButton\n              size=\"huge\"\n              product={product}\n              onClick={triggerAddToShoppingCart}\n            />\n            {\n              // <Button size=\"huge\" fluid color=\"teal\">\n              //   <Button.Content>\n              //     <Icon name=\"shop\" /> Add to cart\n              //   </Button.Content>\n              // </Button>\n            }\n          </Segment>\n        </Segment.Group>\n      )}\n    </>\n  );\n}\n","import { loadProductsList } from \"./commandCreators\";\n\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport const AGGREGATE_NAME = \"ProductsAggregate\";\nconst initialState = {\n  productsList: [],\n  selectedProduct: null\n};\n\nexport { ProductList } from \"./ui/containers/productList\";\nexport { ProductDetails } from \"./ui/containers/productDetails\";\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState,\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => loadProductsList()\n};\n","export const Events = {\n  PRODUCT_ADDED_TO_CART: \"PRODUCT_ADDED_TO_CART\"\n};\n","import { Events } from \"../verbs/events\";\n\nexport const evtProductAddedToCartHandler = {\n  command: Events.PRODUCT_ADDED_TO_CART,\n  handler: (aggregateState, { product }) => {\n    // TODO change to add products count and total\n    // const items = aggregateState.items.concat(product);\n\n    const { items } = aggregateState;\n    if (items.has(product.id)) {\n      const prod = items.get(product.id);\n      items.set(product.id, { ...product, count: prod.count + 1 });\n    } else {\n      items.set(product.id, { ...product, count: 1 });\n    }\n    return {\n      proposal: {\n        ...aggregateState,\n        items\n      }\n    };\n  }\n};\n\nexport const evtHandlers = [evtProductAddedToCartHandler];\n","import React from \"react\";\nimport {\n  Button,\n  Popup,\n  Header,\n  Icon,\n  Segment,\n  Item,\n  Label\n} from \"semantic-ui-react\";\nimport { AGGREGATE_NAME as SHOPPING_CART_AGGREGATE_NAME } from \"../../\";\nimport { useObserveAggregateState } from \"../../../../subwayUtils/\";\n\nexport function HeaderShoppingCartDropdown({ size }) {\n  const [shoppingData] = useObserveAggregateState(\n    SHOPPING_CART_AGGREGATE_NAME,\n    aggregateState => aggregateState || {}\n  );\n  const { items = new Map() } = shoppingData || {};\n  const cartItems = Array.from(items).map(item => ({ ...item[1] }));\n  return (\n    <Popup\n      on=\"click\"\n      position=\"bottom right\"\n      trigger={\n        <Button basic color=\"teal\" style={{ marginLeft: \"0.5em\" }}>\n          <Icon name=\"shopping cart\" color=\"teal\" />\n          {cartItems && cartItems.length > 0 && (\n            <Label circular size=\"tiny\" color=\"teal\">\n              {cartItems.reduce((acc, curr) => +acc + +curr.count, 0)}\n            </Label>\n          )}\n        </Button>\n      }\n    >\n      <Popup.Content>\n        {(!cartItems || cartItems.length === 0) && (\n          <Segment basic textAlign=\"center\">\n            <Icon name=\"frown outline\" size=\"big\" color=\"teal\" />\n            <Header size=\"tiny\">\n              <Header.Subheader>Your shopping cart is empty</Header.Subheader>\n            </Header>\n          </Segment>\n        )}\n        {cartItems && cartItems.length > 0 && (\n          <Item.Group divided>\n            {cartItems.map(\n              ({ id, img, title, price, newPrice, ccy, count }) => (\n                <Item key={id}>\n                  <Item.Image size=\"mini\" src={img} />\n\n                  <Item.Content>\n                    <Item.Description>\n                      {count && count > 1 && (\n                        <Label circular size=\"tiny\" color=\"black\">\n                          x{count}\n                        </Label>\n                      )}{\" \"}\n                      {title}\n                    </Item.Description>\n                    <Item.Meta>\n                      <span className=\"price\">\n                        {ccy}\n                        {(newPrice || price) * count}\n                      </span>\n                    </Item.Meta>\n                  </Item.Content>\n                </Item>\n              )\n            )}\n            <Item>\n              <Item.Header as=\"h4\">\n                Total: {cartItems[0].ccy}{\" \"}\n                {cartItems\n                  .reduce(\n                    (acc, curr) =>\n                      +acc + +((curr.newPrice || curr.price) * curr.count),\n                    0\n                  )\n                  .toFixed(2)}\n              </Item.Header>\n            </Item>\n\n            <Item>\n              <Item.Content>\n                <Button fluid color=\"teal\">\n                  Checkout\n                </Button>\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        )}\n      </Popup.Content>\n    </Popup>\n  );\n}\n","import { Subway } from \"../../subwayUtils/\";\n\n// import { addProductToCart } from \"./commandCreators\";\nimport { Events } from \"./verbs/events\";\nimport { cmdHandlers } from \"./handlers/commands\";\nimport { evtHandlers } from \"./handlers/events\";\n\nexport const AGGREGATE_NAME = \"ShoppingCartAggregate\";\n\nexport {\n  HeaderShoppingCartDropdown\n} from \"./ui/containers/headerShoppingCartDropdown\";\n\nexport const aggregateConfig = {\n  name: AGGREGATE_NAME,\n  initialState: { items: new Map() },\n  cmdHandlers,\n  evtHandlers,\n  bootstrap: () => {\n    Subway.selectAggregate(\"ProductsAggregate\").triggerAfter(\n      \"ADD_TO_SHOPPING_CART_TRIGGERED\",\n      {\n        targetAggregate: AGGREGATE_NAME,\n        triggeredEvent: Events.PRODUCT_ADDED_TO_CART\n      }\n    );\n  }\n};\n","// import { Commands } from \"../verbs/commands\";\n// import { Events } from \"../verbs/events\";\n\n// export const cmdAddProductToCartHandler = {\n//   command: Commands.ADD_PRODUCT_TO_CART,\n//   handler: async (aggregateState, payload) => {\n//     return {\n//       events: [{ id: Events.PRODUCT_ADDED_TO_CART, payload }]\n//     };\n//   }\n// };\nexport const cmdHandlers = [\n  /*cmdAddProductToCartHandler*/\n];\n","import React from \"react\";\nimport { Container } from \"semantic-ui-react\";\n\nimport { useObserveAggregateState } from \"./subwayUtils/\";\n\nimport { Navbar, Breadcrumbs } from \"./aggregates/navigation\";\nimport { ProductList, ProductDetails } from \"./aggregates/products\";\nimport { HeaderShoppingCartDropdown } from \"./aggregates/shoppingCart\";\n\nfunction App() {\n  const [currentPage] = useObserveAggregateState(\n    \"NavigationAggregate\",\n    aggregateState => aggregateState.currentPage\n  );\n\n  return (\n    <div style={{ background: \"#f8f9fa\" }}>\n      <Container>\n        <Navbar shoppingCartMenuItem={<HeaderShoppingCartDropdown />} />\n        <br />\n        <br />\n        <br />\n        <br />\n        <Breadcrumbs />\n        <br />\n        <br />\n        {(!currentPage || currentPage) === \"home\" && <ProductList />}\n        {currentPage === \"product\" && <ProductDetails />}\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import { Subway } from \"./\";\n\nexport const initHandlers = (aggregate, cmdHandlers, evtHandlers) => {\n  cmdHandlers &&\n    cmdHandlers.forEach(({ command, handler, onError = null }) => {\n      aggregate.setCommandHandler(command, handler, onError);\n    });\n  evtHandlers &&\n    evtHandlers.forEach(({ command, handler, onError = null }) => {\n      aggregate.setEventHandler(command, handler, onError);\n    });\n};\n\n// NOTE provide helper in the library itself?\nexport const initAggregates = aggregates => {\n  aggregates.forEach(\n    ({ name, initialState = {}, cmdHandlers, evtHandlers }) => {\n      const _agg = Subway.createAggregate(name, initialState);\n      initHandlers(_agg, cmdHandlers, evtHandlers);\n    }\n  );\n  aggregates.forEach(({ bootstrap = () => {} }) => bootstrap());\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { initAggregates } from \"./subwayUtils\";\nimport { aggregateConfig as productAggregateConfig } from \"./aggregates/products\";\nimport { aggregateConfig as navigationAggregateConfig } from \"./aggregates/navigation\";\nimport { aggregateConfig as shoppingCartAggregateConfig } from \"./aggregates/shoppingCart\";\n\n// TODO move to SubwayJS utils?\ninitAggregates([\n  productAggregateConfig,\n  navigationAggregateConfig,\n  shoppingCartAggregateConfig\n]);\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
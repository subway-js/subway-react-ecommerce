(this["webpackJsonpsubway-react-ecommerce"]=this["webpackJsonpsubway-react-ecommerce"]||[]).push([[0],{259:function(e,t,a){e.exports=a(439)},439:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(61),l=a.n(c),o=a(15),i=a(448),u=window.Subway,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){console.log(">>>> useObserveAggregateState init");var a=u.selectAggregate(e).observeState((function(e){l(t(e))}));return function(){a()}}),[]),[c]},m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(n.useState)(null),c=Object(o.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){console.log(">>>> useReactToEvent init !!! TODO: what if return null? and triggered action?");var n=u.selectAggregate(e).publicChannel().reactToEvent(t,(function(e,t){i(a?a(t):t)}));return function(){n()}})),[l]},d="PRODUCT_PAGE_SELECTED",g="HOME_PAGE_SELECTED",E="CHECKOUT_PAGE_REQUEST_SUBMITTED",p="NAVIGATE_TO_PRODUCT_DETAILS",f="NAVIGATE_TO_CHECKOUT_PAGE",v=a(223),h="SELECT_HOME_PAGE",b=[{command:h,handler:function(e,t){return Object(v.a)(e),(0,t.triggerEvents)([{id:g}])}}],C=a(21),O=[{command:g,handler:function(e,t){var a=e.state;(0,t.updateState)(Object(C.a)({},a,{selectedProductName:null,currentPage:"home"}))}},{command:d,handler:function(e,t){var a=e.state,n=e.payload;(0,t.updateState)(Object(C.a)({},a,{selectedProductName:n.product.title,currentPage:"product"}))}},{command:E,handler:function(e,t){var a=e.state;(0,t.updateState)(Object(C.a)({},a,{selectedProductName:null,currentPage:"checkout"}))}}],A=a(462),S=a(463),y=a(461),T=a(455),w=a(51),_=a(457),j=a(451),P=function(){u.selectAggregate(R).command(h)};function D(e){var t=e.shoppingCartMenuItem,a=m(R,"SESSION_STATUS_UPDATED",(function(e){return e})),n=Object(o.a)(a,1)[0]||{},c=n.userLogged,l=n.username,d=s(R,(function(e){return e.currentPage})),g=Object(o.a)(d,1)[0];return r.a.createElement(A.a,{size:"small",borderless:!0,fixed:"top"},r.a.createElement(i.a,null,r.a.createElement(A.a.Item,null,r.a.createElement(S.a,{color:"teal"},"SubwayJS eComm")),"checkout"!==g&&r.a.createElement(A.a.Item,{position:"right"},t,!c&&r.a.createElement(y.a,{onClick:function(){u.selectAggregate(R).publicChannel().command("SHOW_LOGIN_MODAL")},style:{marginLeft:10},color:"teal",basic:!0}," ","Log-in"),c&&r.a.createElement(T.a,{on:"click",position:"bottom right",trigger:r.a.createElement(y.a,{basic:!0,color:"teal",icon:!0,style:{marginLeft:10}},r.a.createElement(w.a,{name:"user"}))},r.a.createElement(T.a.Content,{style:{padding:"0 !important"}},r.a.createElement(_.a.Header,null,"Hi, ".concat(l)," "),r.a.createElement(j.a,null),r.a.createElement(_.a,{selection:!0,verticalAlign:"middle"},r.a.createElement(_.a.Item,{onClick:function(){u.selectAggregate(R).publicChannel().command("PERFORM_USER_LOGOUT")}},"Logout")))))))}var I=a(465),L=a(466);function k(){var e=s(R),t=Object(o.a)(e,1)[0]||{},a=t.currentPage,n=t.selectedProductName;return r.a.createElement(I.a,{relaxed:!0,columns:2},r.a.createElement(I.a.Column,null,r.a.createElement(L.a,null,"home"===a&&r.a.createElement(L.a.Section,{active:!0},"Products"),"product"===a&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Section,{active:!0,link:!0,onClick:function(){return P()}},"Products"),r.a.createElement(L.a.Divider,null),r.a.createElement(L.a.Section,{active:!0},n)),"checkout"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Section,{active:!0,link:!0,onClick:function(){return P()}},"Products"),r.a.createElement(L.a.Divider,null),r.a.createElement(L.a.Section,{active:!0},"Checkout")))),("product"===a||"checkout"===a)&&r.a.createElement(I.a.Column,{textAlign:"right"},r.a.createElement(y.a,{onClick:function(){return P()},size:"tiny",content:"Back to products",icon:"angle left",color:"teal",labelPosition:"left"})))}var R="NavigationAggregate",U={name:R,initialState:{currentPage:"home"},cmdHandlers:b,evtHandlers:O,bootstrap:function(){u.selectAggregate(R).publicChannel().reactToCommand(p,(function(e,t){var a=e.payload;(0,t.triggerEvents)([{id:d,payload:a}])})),u.selectAggregate(R).publicChannel().reactToCommand(f,(function(e,t){var a=e.payload;(0,t.triggerEvents)([{id:E,payload:a}])}))}},H="LoadProductsList",x=function(e){u.selectAggregate(ne).publicChannel().command("ADD_TO_SHOPPING_CART",{product:e})},M=a(44),N=a.n(M),z={PRODUCTS_LIST_LOADED:"ProductsListLoaded"},G=[{id:10,img:"images/products/air-jordan-1-i.jpg",title:"Air Jordan I",price:"199.00",newPrice:"149.99",ccy:"$",rating:"5",reviewsCount:54},{id:11,img:"images/products/air-jordan-original-2.jpg",title:"Air Jordan II",price:"199.00",newPrice:"249.00",ccy:"$",rating:"4",reviewsCount:12},{id:12,img:"images/products/air-jordan-3.jpg",title:"Air Jordan III",price:"199.00",ccy:"$",rating:"4",reviewsCount:43},{id:13,img:"images/products/air-jordan-4.jpg",title:"Air Jordan IV",price:"199.00",ccy:"$",rating:"2",reviewsCount:76},{id:14,img:"images/products/air-jordan-og-5-fire-red.jpeg",title:"Air Jordan V",price:"199.00",ccy:"$",rating:"5",reviewsCount:23},{id:15,img:"images/products/air-jordan-6.jpg",title:"Air Jordan VI",price:"199.00",ccy:"$",rating:"4",reviewsCount:54},{id:16,img:"images/products/air-jordan-7.jpg",title:"Air Jordan VII",price:"199.00",ccy:"$",rating:"2",reviewsCount:13},{id:17,img:"images/products/air-jordan-8.jpg",title:"Air Jordan VII",price:"199.00",ccy:"$",rating:"4",reviewsCount:43},{id:18,img:"images/products/air-jordan-9.jpg",title:"Air Jordan IX",price:"199.00",ccy:"$",rating:"4",reviewsCount:55},{id:19,img:"images/products/air-jordan-10.jpg",title:"Air Jordan X",price:"199.00",ccy:"$",rating:"5",reviewsCount:12},{id:20,img:"images/products/air-jordan-11.jpg",title:"Air Jordan XI",price:"199.00",newPrice:"149.00",ccy:"$",rating:"5",reviewsCount:23},{id:21,img:"images/products/air-jordan-12.jpg",title:"Air Jordan XII",price:"199.00",newPrice:"149.00",ccy:"$",rating:"5",reviewsCount:132}],F=[{command:H,handler:function(e,t){var a,n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.state,e.payload,a=t.triggerEvents,r.next=4,N.a.awrap(new Promise((function(e,t){setTimeout((function(){e(G.reverse())}),500)})));case 4:n=r.sent,a([{id:z.PRODUCTS_LIST_LOADED,payload:{productsList:n}}]);case 6:case"end":return r.stop()}}))}},{command:"SELECT_PRODUCT",handler:function(e,t){e.state;var a=e.payload;(0,t.triggerEvents)([{id:z.PRODUCT_SELECTED_FOR_DETAILS,payload:{product:a.product}}])}}],J=[{command:z.PRODUCTS_LIST_LOADED,handler:function(e,t){var a=e.state,n=e.payload,r=void 0===n?{}:n,c=t.updateState,l=r.productsList;c(Object(C.a)({},a,{productsList:l}))}},{command:z.PRODUCT_SELECTED_FOR_DETAILS,handler:function(e,t){var a=e.state,n=e.payload,r=void 0===n?{}:n,c=t.updateState,l=r.product;c(Object(C.a)({},a,{selectedProduct:l}))}}],B=a(459),V=a(252),$=a(464),Y=a(469),q=a(114);function W(e){var t=e.product,a=e.size,c=e.onClick,l=Object(n.useState)(!1),i=Object(o.a)(l,2),u=i[0],s=i[1];return r.a.createElement(y.a,{size:a,fluid:!0,loading:u,color:"teal",onClick:function(){s(!0),setTimeout((function(){c(t),s(!1)}),500)}},r.a.createElement(y.a.Content,null,r.a.createElement(w.a,{name:"shop"})," Add to cart"))}function Q(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=s(ne,(function(e){return e.productsList})),i=Object(o.a)(l,1)[0];return r.a.createElement(I.a,{columns:3},i&&i.map((function(e){var t=e.id,n=e.img,l=e.title,o=e.price,i=e.rating,s=e.reviewsCount,m=e.newPrice,d=void 0===m?null:m,g=e.ccy;return r.a.createElement(I.a.Column,{key:t},r.a.createElement(B.a,null,d&&r.a.createElement(V.a,{fluid:!0,label:{as:"a",color:"orange",corner:"left",icon:"star"}}),r.a.createElement($.a.Dimmable,{style:{padding:40,backgroundColor:"white"},as:V.a,onMouseOver:function(){c(t)},onMouseLeave:function(){c(null)},dimmed:a===t},r.a.createElement(V.a,{src:n,wrapped:!0}),r.a.createElement($.a,{active:a===t},r.a.createElement(y.a,{basic:!0,size:"small",color:"teal",onClick:function(){return function(e){var t=u.selectAggregate(ne);t.publicChannel().command("NAVIGATE_TO_PRODUCT_DETAILS",{product:e}),t.command("SELECT_PRODUCT",{product:e})}(e)}},r.a.createElement(y.a.Content,null,r.a.createElement(w.a,{name:"magnify"})," Product details")))),r.a.createElement(B.a.Content,null,r.a.createElement(B.a.Header,{as:"a"},l),r.a.createElement(B.a.Meta,null,r.a.createElement(Y.a,{size:"mini",disabled:!0,icon:"star",defaultRating:i,maxRating:5})," ",s," Reviews"),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Description,null,r.a.createElement("strike",null,g,o)," ",r.a.createElement(w.a,{name:"arrow right"})," ",r.a.createElement(q.a,{as:"span",color:"orange",tag:!0},g,d))),!d&&r.a.createElement(B.a.Description,null,g,o," ")),r.a.createElement(B.a.Content,{extra:!0},r.a.createElement(W,{size:"small",product:e,onClick:x}))))})))}var X=a(467);function K(){var e=s(ne,(function(e){return e.selectedProduct})),t=Object(o.a)(e,1)[0];return r.a.createElement(r.a.Fragment,null," ",t&&r.a.createElement(X.a.Group,{horizontal:!0},r.a.createElement(X.a,{padded:"very"},r.a.createElement(V.a,{src:t.img,wrapped:!0}),r.a.createElement(X.a.Group,{horizontal:!0,compact:!0},[1,2,3].map((function(e){return r.a.createElement(X.a,{key:e,basic:!0},r.a.createElement(V.a,{src:t.img,size:"tiny"}))})))),r.a.createElement(X.a,null,r.a.createElement(S.a,{size:"huge"},t.title," ",t.newPrice&&r.a.createElement(q.a,{as:"span",color:"orange",tag:!0},"ON SALE")),r.a.createElement(i.a,null,r.a.createElement(Y.a,{disabled:!0,icon:"star",defaultRating:t.rating,maxRating:5})," ",t.reviewsCount," Reviews"),r.a.createElement("br",null),r.a.createElement(i.a,null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),r.a.createElement("br",null),t.newPrice&&r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{as:"span",color:"grey",basic:!0,size:"huge"},r.a.createElement("strike",null,t.ccy,t.price)),r.a.createElement(w.a,{name:"arrow right",size:"big"}),r.a.createElement(q.a,{as:"span",color:"orange",size:"huge"},t.ccy,t.newPrice)),!t.newPrice&&r.a.createElement(S.a,{size:"huge"},t.ccy,t.price),r.a.createElement(j.a,null),r.a.createElement(W,{size:"huge",product:t,onClick:x}))))}var Z=a(470),ee=a(460),te=["This is NOT a real ecommerce","Prices and ratings are not real","All product and company names are trademarks\u2122 or registered\xae trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them."];function ae(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){setTimeout((function(){c(!0)}),4e3)}),[]);return r.a.createElement(Z.a,{visible:a,animation:"fade up",duration:500},r.a.createElement(ee.a,{color:"teal",size:"tiny",onDismiss:function(){c(!1)},style:{position:"fixed",zIndex:10,bottom:0,right:0,width:"100%"},header:"Disclaimer",list:te}))}var ne="ProductsAggregate",re={name:ne,initialState:{productsList:[],selectedProduct:null},cmdHandlers:F,evtHandlers:J,bootstrap:function(){u.selectAggregate(ne).command(H)}},ce="PRODUCT_ADDED_TO_CART",le="ORDER_PROCESSED",oe="ADD_TO_SHOPPING_CART",ie={SUBMIT_ORDER:"SUBMIT_ORDER"},ue=[{command:ie.SUBMIT_ORDER,handler:function(e,t){var a,n,r,c,l;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.state,a=e.payload,n=t.triggerEvents,r=a.items,o.next=5,N.a.awrap(new Promise((function(e,t){setTimeout((function(){e({status:"ok"})}),1e3)})));case 5:c=o.sent,l=[],"ok"===c.status&&(l=l.concat([{id:le,payload:{successful:!0,items:r}}])),n(l);case 10:case"end":return o.stop()}}))}}],se=[{command:ce,handler:function(e,t){var a=e.state,n=e.payload,r=t.updateState,c=n.product,l=a.items;if(l.has(c.id)){var o=l.get(c.id);l.set(c.id,Object(C.a)({},c,{count:o.count+1}))}else l.set(c.id,Object(C.a)({},c,{count:1}));r(Object(C.a)({},a,{items:l,checkoutSuccessful:!1}))}},{command:le,handler:function(e,t){e.state;var a=e.payload;(0,t.updateState)({checkoutSuccessful:a.successful,items:new Map})}}],me=a(456);function de(e){e.size;var t=s(pe,(function(e){return e||{}})),a=(Object(o.a)(t,1)[0]||{}).items,n=void 0===a?new Map:a,c=Array.from(n).map((function(e){return Object(C.a)({},e[1])})),l=c.reduce((function(e,t){return+e+ +t.count}),0);return r.a.createElement(T.a,{on:"click",position:"bottom right",trigger:r.a.createElement(y.a,{color:"teal",icon:!0},r.a.createElement(w.a,{name:"shopping cart"}),l>0&&"    (".concat(l,")"))},r.a.createElement(T.a.Content,null,(!c||0===c.length)&&r.a.createElement(X.a,{basic:!0,textAlign:"center"},r.a.createElement(w.a,{name:"frown outline",size:"big",color:"teal"}),r.a.createElement(S.a,{size:"tiny"},r.a.createElement(S.a.Subheader,null,"Your shopping cart is empty"))),c&&c.length>0&&r.a.createElement(me.a.Group,{divided:!0},c.map((function(e){var t=e.id,a=e.img,n=e.title,c=e.price,l=e.newPrice,o=e.ccy,i=e.count;return r.a.createElement(me.a,{key:t},r.a.createElement(me.a.Image,{size:"mini",src:a}),r.a.createElement(me.a.Content,null,r.a.createElement(me.a.Description,null,i&&i>1&&r.a.createElement(q.a,{circular:!0,size:"tiny",color:"black"},"x",i)," ",n),r.a.createElement(me.a.Meta,null,r.a.createElement("span",{className:"price"},o,(l||c)*i))))})),r.a.createElement(me.a,null,r.a.createElement(me.a.Header,{as:"h4"},"Total: ",c[0].ccy," ",c.reduce((function(e,t){return+e+ +(t.newPrice||t.price)*t.count}),0).toFixed(2))),r.a.createElement(me.a,null,r.a.createElement(me.a.Content,null,r.a.createElement(y.a,{fluid:!0,color:"teal",onClick:function(){u.selectAggregate(pe).publicChannel().command("NAVIGATE_TO_CHECKOUT_PAGE")}},"Checkout"))))))}var ge=a(458);function Ee(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(o.a)(l,2),d=i[0],g=i[1],E=s(pe),p=Object(o.a)(E,1)[0],f=p||{},v=f.items,h=void 0===v?[]:v,b=f.checkoutSuccessful,O=void 0!==b&&b,A=m(pe,"SESSION_STATUS_UPDATED"),T=Object(o.a)(A,1)[0]||{},_=T.userLogged,j=T.username;Object(n.useEffect)((function(){g(O),c(!1)}),[O]);var P=Array.from(h||[]).map((function(e){return Object(C.a)({},e[1])})),D=P[0]?P[0].ccy:null,I=P.reduce((function(e,t){return+e+ +t.count}),0),L=P.reduce((function(e,t){return+e+ +(t.newPrice||t.price)*t.count}),0).toFixed(2);return!a&&d?r.a.createElement(S.a,{color:"teal",style:{marginTop:100},as:"h2",icon:!0,textAlign:"center"},r.a.createElement(w.a,{name:"winner"}),"Order processed successfully!",r.a.createElement(S.a.Subheader,null,"Thanks ",j,"! You will receive your products tomorrow!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,a),r.a.createElement(ge.a,{columns:4,color:"teal"},r.a.createElement(ge.a.Header,null,r.a.createElement(ge.a.Row,null,r.a.createElement(ge.a.HeaderCell,{width:5},"PRODUCT"),r.a.createElement(ge.a.HeaderCell,{textAlign:"center"},"QUANTITY"),r.a.createElement(ge.a.HeaderCell,{width:5,textAlign:"center"},"UNIT PRICE"),r.a.createElement(ge.a.HeaderCell,{width:5,textAlign:"right"},"TOTAL"))),r.a.createElement(ge.a.Body,null,P.map((function(e){var t=e.id,a=e.title,n=e.count,c=e.newPrice,l=e.price,o=e.ccy,i=e.img;return r.a.createElement(ge.a.Row,{key:t},r.a.createElement(ge.a.Cell,null,c&&r.a.createElement(q.a,{color:"orange",size:"mini",ribbon:!0},"OFFER!"),a," ",r.a.createElement(V.a,{src:i,size:"mini"})),r.a.createElement(ge.a.Cell,{textAlign:"center"}," ",n),r.a.createElement(ge.a.Cell,{textAlign:"center"},r.a.createElement(S.a,{as:"h5"},r.a.createElement(S.a.Content,null,c||l," ",o,c&&r.a.createElement(S.a.Subheader,{style:{textDecoration:"line-through"}},l," ",o)))),r.a.createElement(ge.a.Cell,{positive:!0,textAlign:"right"},r.a.createElement(S.a,{as:"h4"},r.a.createElement(S.a.Content,null,((c||l)*n).toFixed(2)," ",o))))}))),r.a.createElement(ge.a.Footer,null,r.a.createElement(ge.a.Row,null,r.a.createElement(ge.a.HeaderCell,null),r.a.createElement(ge.a.HeaderCell,{textAlign:"center"},I," articles"),r.a.createElement(ge.a.HeaderCell,null),r.a.createElement(ge.a.HeaderCell,{positive:!0,textAlign:"right"},L," ",D)))),r.a.createElement(ee.a,{color:"teal",attached:!0},r.a.createElement(S.a,{as:"h4"},j?"Hi ".concat(j,", you can buy in one click!"):"Buy in one click",r.a.createElement(S.a.Subheader,null,"Pay with your default paying method and receive tomorrow at your home address.")),r.a.createElement("br",null),!d&&!a&&_&&r.a.createElement(y.a,{color:"orange",floated:"right",onClick:function(){var e;c(!0),e=P,u.selectAggregate(pe).command(ie.SUBMIT_ORDER,{items:e})}},"Buy in 1-click!"),!d&&!a&&!_&&r.a.createElement(y.a,{animated:"fade",color:"teal",floated:"right",onClick:function(){u.selectAggregate(pe).publicChannel().command("SHOW_LOGIN_MODAL")}},r.a.createElement(y.a.Content,{visible:!0},"Buy in 1-click!"),r.a.createElement(y.a.Content,{hidden:!0},"Login first")),!d&&a&&r.a.createElement(y.a,{color:"orange",disabled:!0,floated:"right",loading:!0},"Buy in 1-click!"),!a&&d&&"FINALIZED",r.a.createElement("br",null),r.a.createElement("br",null)),!_&&r.a.createElement(ee.a,{attached:"bottom",warning:!0},r.a.createElement(w.a,{name:"info"}),"If you are not logged in, we will ask for your credentials before proceeding with the order"))}var pe="ShoppingCartAggregate",fe={name:pe,initialState:{checkoutSuccessful:null,items:new Map},cmdHandlers:ue,evtHandlers:se,bootstrap:function(){u.selectAggregate(pe).publicChannel().publishComponent("HeaderShoppingCartDropdown",(function(){return r.a.createElement(de,null)})),u.selectAggregate(pe).publicChannel().reactToCommand(oe,(function(e,t){var a=e.payload;(0,t.triggerEvents)([{id:ce,payload:a}])}))}},ve="LOGIN_MODAL_VISIBILITY_UPDATED",he="LOGIN_MODAL_REQUESTED",be="LOGOUT_USER_REQUESTED",Ce="USER_SUCCESSFULLY_AUTHENTICATED",Oe="SESSION_STATUS_UPDATED",Ae="UPDATE_LOGIN_MODAL_VISIBILITY",Se="AUTHENTICATE_USER",ye="SHOW_LOGIN_MODAL",Te="PERFORM_USER_LOGOUT",we=[{command:Ae,handler:function(e,t){e.state;var a=e.payload;return(0,t.triggerEvents)([{id:ve,payload:a}])}},{command:Se,handler:function(e,t){var a,n,r,c,l,o;return N.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e.state,a=e.payload,n=t.triggerEvents,r=a.username,a.password,i.next=5,N.a.awrap(new Promise((function(e,t){setTimeout((function(){e({status:"ok",jwt:"fake.jwt.token"})}),1e3)})));case 5:c=i.sent,l=[],"ok"===c.status&&(o=c.jwt,l=l.concat([{id:Ce,payload:{jwt:o,username:r}}])),n(l);case 10:case"end":return i.stop()}}))}}],_e=[{command:ve,handler:function(e,t){var a=e.state,n=e.payload;(0,t.updateState)(Object(C.a)({},a,{loginModalVisible:n.show}))}},{command:he,handler:function(e,t){e.state,e.payload;(0,t.triggerEvents)([{id:ve,payload:{show:!0}}])}},{command:Ce,handler:function(e,t){var a=e.state,n=e.payload,r=t.triggerEvents,c=t.updateState,l=t.broadcastEvent,o=n.jwt,i=n.username;l(Oe,{userLogged:!0,username:i}),c(Object(C.a)({},a,{userLogged:!0,loginModalVisible:!1,jwt:o,username:i})),r([{id:Oe,payload:{userLogged:!0,username:i}}])}},{command:be,handler:function(e,t){var a=e.state,n=(e.payload,t.triggerEvents),r=t.updateState;(0,t.broadcastEvent)(Oe,{userLogged:!1}),r(Object(C.a)({},a,{userLogged:!1,jwt:null,username:null})),n([{id:Oe,payload:{userLoggedIn:!1}}])}}],je=a(453),Pe=a(452),De=function(){u.selectAggregate(Le).command(Ae,{show:!1})};function Ie(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=s("SessionAggregate",(function(e){return e.loginModalVisible})),i=Object(o.a)(l,1)[0];return Object(n.useEffect)((function(){c(!1)}),[i]),r.a.createElement(je.a,{open:i,dimmer:"blurring",size:"small",onClose:function(){return De()}},r.a.createElement(S.a,{color:"teal",icon:"user",content:"Enter your credentials"}),r.a.createElement(je.a.Content,null,r.a.createElement(Pe.a,null,r.a.createElement(Pe.a.Field,null,r.a.createElement(Pe.a.Input,{disabled:!0,value:"testuser",label:"Enter Username"})),r.a.createElement(Pe.a.Field,null,r.a.createElement(Pe.a.Input,{disabled:!0,value:"password",label:"Enter Password",type:"password"})))),r.a.createElement(je.a.Actions,null,r.a.createElement(y.a,{disabled:a,color:"grey",onClick:function(){return De()}},r.a.createElement(w.a,{name:"cancel"})," Cancel"),r.a.createElement(y.a,{loading:a,disabled:a,color:"teal",onClick:function(){var e,t;c(!0),e="MichaelJordan23",t="aPassword",u.selectAggregate(Le).command(Se,{username:e,password:t})}},r.a.createElement(w.a,{name:"checkmark"})," Simulate Successful Login")))}var Le="SessionAggregate",ke={name:Le,initialState:{userLogged:!1,loginModalVisible:!1,jwt:null,username:null},cmdHandlers:we,evtHandlers:_e,bootstrap:function(){u.selectAggregate(Le).publicChannel().reactToCommand(ye,(function(e,t){e.payload;(0,t.triggerEvents)([{id:he}])})),u.selectAggregate(Le).publicChannel().reactToCommand(Te,(function(e,t){e.payload;(0,t.triggerEvents)([{id:be}])}))}};var Re,Ue=function(){var e=s("NavigationAggregate",(function(e){return e.currentPage})),t=Object(o.a)(e,1)[0],a=u.selectAggregate("ShoppingCartAggregate").publicChannel().getComponent("HeaderShoppingCartDropdown").factoryFunction();return r.a.createElement("div",{style:{background:"#f8f9fa"}},r.a.createElement(i.a,null,r.a.createElement(Ie,null),r.a.createElement(D,{shoppingCartMenuItem:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k,null),r.a.createElement("br",null),r.a.createElement("br",null),(!t||"home"===t)&&r.a.createElement(Q,null),"product"===t&&r.a.createElement(K,null),"checkout"===t&&r.a.createElement(Ee,null),r.a.createElement(ae,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));(Re=[ke,re,U,fe]).forEach((function(e){var t=e.name,a=e.initialState,n=void 0===a?{}:a,r=e.cmdHandlers,c=void 0===r?[]:r,l=e.evtHandlers,o=void 0===l?[]:l;!function(e,t,a){t&&t.forEach((function(t){var a=t.command,n=t.handler,r=t.onError,c=void 0===r?null:r;e.reactToCommand(a,n,c)})),a&&a.forEach((function(t){var a=t.command,n=t.handler,r=t.onError,c=void 0===r?null:r;e.reactToEvent(a,n,c)}))}(u.createAggregate(t,n),c,o)})),Re.forEach((function(e){var t=e.bootstrap;return(void 0===t?function(){}:t)()})),l.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[259,1,2]]]);
//# sourceMappingURL=main.a762c183.chunk.js.map